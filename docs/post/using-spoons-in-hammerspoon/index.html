<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
     
    <title>zzamboni.org  | Using Spoons in Hammerspoon</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
     <meta name="generator" content="Hugo 0.45" />
      
      
        <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
      

     <link href='https://zzamboni.org/dist/main.css' rel='stylesheet' type="text/css" />
     <link href='https://zzamboni.org/css/site.css' rel='stylesheet' type="text/css" />
     <link href='https://zzamboni.org/css/syntax.css' rel='stylesheet' type="text/css" />

     

      <meta property="og:title" content="Using Spoons in Hammerspoon" />
<meta property="og:description" content="In this second article about Hammerspoon, we look into Spoons,
modules written in Lua which can be easily installed and loaded into
Hammerspoon to provide ready-to-use functionality. Spoons provide a
predefined API to configure and use them. They are also a good way to
share your own work with other users.

" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zzamboni.org/post/using-spoons-in-hammerspoon/" />



<meta property="article:published_time" content="2017-09-01T20:17:55&#43;02:00"/>

<meta property="article:modified_time" content="2017-09-01T20:17:55&#43;02:00"/>











<meta itemprop="name" content="Using Spoons in Hammerspoon">
<meta itemprop="description" content="In this second article about Hammerspoon, we look into Spoons,
modules written in Lua which can be easily installed and loaded into
Hammerspoon to provide ready-to-use functionality. Spoons provide a
predefined API to configure and use them. They are also a good way to
share your own work with other users.

">


<meta itemprop="datePublished" content="2017-09-01T20:17:55&#43;02:00" />
<meta itemprop="dateModified" content="2017-09-01T20:17:55&#43;02:00" />
<meta itemprop="wordCount" content="2012">



<meta itemprop="keywords" content="hammerspoon,spoons,howto,mac," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Using Spoons in Hammerspoon"/>
<meta name="twitter:description" content="In this second article about Hammerspoon, we look into Spoons,
modules written in Lua which can be easily installed and loaded into
Hammerspoon to provide ready-to-use functionality. Spoons provide a
predefined API to configure and use them. They are also a good way to
share your own work with other users.

"/>

        
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-109878074-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-2108021418174840",
    enable_page_level_ads: true
  });
</script>
      
      <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon.png">
      <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
      <link rel="manifest" href="/manifest.json">
      <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  </head>

  <body class="ma0 avenir bg-near-white production">

    
   
  

  
  
  <header class="cover bg-center" style="background-image: url('https://zzamboni.org/images/hammerspoon.png');">
    <div class="pb5-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://zzamboni.org/" class="f3 fw2 hover-white no-underline white-90 dib">
      zzamboni.org
    </a>
    <div class="flex-l items-center">
      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/post/" title="Blog page">
              Blog
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/book/" title="Books page">
              Books
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/code/" title="Code page">
              Code
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/tags/" title="Tags page">
              Tags
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/contact/" title="Contact page">
              Contact
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About page">
              About
            </a>
          </li>
          
        </ul>
      
      



  <a href="https://twitter.com/zzamboni" class="link-transition twitter link dib z-999 pt3 pt0-l mr2" title="Twitter link">
    <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

  </a>




    </div>
  </div>
</nav>

      <div class="tc-l pv4 ph3 ph4-ns">
        <h1 class="f2 f1-l fw2 white-90 mb0 mt0 lh-title">Using Spoons in Hammerspoon</h1>
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <p class="f6 b helvetica tracked">
        
        POST
      </p>
      <h1 class="f1 athelas">
        Using Spoons in Hammerspoon
      </h1>
        
        
      <time class="f6 mv4 dib tracked" datetime="2017-09-01T20:17:55&#43;02:00">
        September 1, 2017
      </time>
      <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray">
        <p>In this second article about Hammerspoon, we look into <em>Spoons</em>,
modules written in Lua which can be easily installed and loaded into
Hammerspoon to provide ready-to-use functionality. Spoons provide a
predefined API to configure and use them. They are also a good way to
share your own work with other users.</p>

<p></p>

<p>See also the <a href="https://zzamboni.org/post/getting-started-with-hammerspoon/">first article in this series</a>.</p>

<h1 id="using-a-spoon-to-locate-your-mouse">Using a Spoon to locate your mouse</h1>

<p>As a first example, we will use the
<a href="http://www.hammerspoon.org/Spoons/MouseCircle.html">MouseCircle</a>
spoon, which allows us to set up a hotkey that displays a color circle
around the current location of the mouse pointer for a few seconds, to
help you locate it.</p>

<p>To install the spoon, download its zip file from
<a href="https://github.com/Hammerspoon/Spoons/raw/master/Spoons/MouseCircle.spoon.zip">https://github.com/Hammerspoon/Spoons/raw/master/Spoons/MouseCircle.spoon.zip</a>,
unpack it, and double-click on the resulting <code>MouseCircle.spoon</code>
file. Hammerspoon will install the Spoon under
<code>~/.hammerspoon/Spoons/</code>.</p>


<figure>
    
        <img src="/figures/mousecircle.png" />
    
    
</figure>


<p>Once a Spoon is installed, you need to use the <code>hs.loadSpoon()</code>
function to load it. Type the following in the Hammerspoon console, or
add it to your <code>init.lua</code> file and reload the configuration:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">hs.loadSpoon</span><span class="p">(</span><span class="s2">&#34;MouseCircle&#34;</span><span class="p">)</span></code></pre></div>
<p>After a spoon is loaded, and depending on what it does, you may need
to configure it, assign hotkeys, and start it. A spoonâ€™s API is
available through the <code>spoon.&lt;SpoonName&gt;</code> namespace. To learn the API
you need to look at the spoon documentation page. In the case of
MouseCircle, a look at
<a href="http://www.hammerspoon.org/Spoons/MouseCircle.html">http://www.hammerspoon.org/Spoons/MouseCircle.html</a> reveals that it
has two methods (<code>bindHotkeys()</code> and <code>show()</code>) and one configuration
variable (<code>color</code>) available under <code>spoon.MouseCircle</code>.</p>

<p>The first API call is <code>spoon.MouseCircle:bindHotkeys()</code>, which allows
us to set up a hotkey that shows the mouse locator circle around the
location of the mouse pointer. Letâ€™s say we wanted to bind the mouse
circle to <kbd>Ctrl</kbd>+<kbd>âŒ˜</kbd>+<kbd>Alt</kbd>+<kbd>d</kbd>
. According to the MouseCircle
documentation, the name for this action is <code>show</code>, so we can do the
following:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">spoon.MouseCircle</span><span class="p">:</span><span class="n">bindHotkeys</span><span class="p">({</span>
  <span class="n">show</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span> <span class="s2">&#34;ctrl&#34;</span><span class="p">,</span> <span class="s2">&#34;cmd&#34;</span><span class="p">,</span> <span class="s2">&#34;alt&#34;</span> <span class="p">},</span> <span class="s2">&#34;d&#34;</span> <span class="p">}</span>
<span class="p">})</span></code></pre></div>
<p>Once you do this, press the hotkey and you should see a red circle
appear around the mouse cursor, and fade away after 3 seconds.</p>

<aside class="admonition tip">
	<div class="admonition-icon">
		<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 8 8">
  <path d="M3.41 0a.5.5 0 0 0-.13.06l-3 1.5a.5.5 0 1 0 .44.88l3-1.5a.5.5 0 0 0-.31-.94zm1 1.5a.5.5 0 0 0-.13.06l-4 2a.5.5 0 1 0 .44.88l4-2a.5.5 0 0 0-.31-.94zm0 2a.5.5 0 0 0-.13.06l-3 1.5a.5.5 0 0 0 .22.94h2a.5.5 0 0 0 .16-1l1.06-.56a.5.5 0 0 0-.31-.94zm-2.56 3.5a.5.5 0 0 0 .16 1h1a.5.5 0 1 0 0-1h-1a.5.5 0 0 0-.09 0 .5.5 0 0 0-.06 0z"
  transform="translate(1)" />
</svg>

	</div>
	
	
	<div class="admonition-content"><p>All spoons which offer the possibility of binding hotkeys have to expose it through the same API:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">spoon.SpoonName</span><span class="p">:</span><span class="n">bindHotkeys</span><span class="p">({</span> <span class="n">action1</span> <span class="o">=</span> <span class="n">keySpec1</span><span class="p">,</span>
                              <span class="n">action2</span> <span class="o">=</span> <span class="n">keySpec2</span><span class="p">,</span> <span class="p">...</span> <span class="p">})</span></code></pre></div>
<p>Each <code>actionX</code> is a name defined by the spoon, which refers to
something that can be bound to a hotkey, and each <code>keySpecX</code> is a
table with two elements: a list of modifiers and the key itself, such
as <code>{ { &quot;ctrl&quot;, &quot;cmd&quot;, &quot;alt&quot; }, &quot;d&quot; }</code>.</p>
</div>
</aside>


<p>The second API call in the MouseCircle spoon is <code>show()</code>, which
triggers the functionality of showing the locator circle
directly. Letâ€™s try it &ndash; type the following in the console:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">spoon.MouseCircle</span><span class="p">:</span><span class="n">show</span><span class="p">()</span></code></pre></div>
<p>Most spoons are structured like this: you can set up hotkeys to
trigger the main functionality, but you can also trigger it via method
calls. Normally you wonâ€™t use these methods, but their availability
makes it possible for you to use spoon functionality from our own
configuration, or from other spoons, to create further automation.</p>

<p><code>spoon.MouseCircle.color</code> is a public configuration variable exposed
by the spoon, which specifies the color that will be used to draw the
circle. Colors are defined according to the documentation for the <a href="http://www.hammerspoon.org/docs/hs.drawing.color.html"><code>hs.drawing.color</code></a> module. Several color collections are
supported, including the OS X system collections and a few defined by
Hammerspoon itself. Color definitions are stored in Lua tables indexed
by their name. For example, you can view the
<a href="http://www.hammerspoon.org/docs/hs.drawing.color.html#hammerspoon"><code>hs.drawing.color.hammerspoon</code></a> table, including the color definitions,
by using the convenient <a href="http://www.hammerspoon.org/docs/hs.inspect.html"><code>hs.inspect</code></a> method on the console:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="o">&gt;</span> <span class="n">hs.inspect</span><span class="p">(</span><span class="n">hs.drawing</span><span class="p">.</span><span class="n">color.hammerspoon</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">black</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">blue</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">green</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">red</span> <span class="o">=</span> <span class="mf">0.0</span>
  <span class="p">},</span>
  <span class="n">green</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">blue</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">green</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">red</span> <span class="o">=</span> <span class="mf">0.0</span>
  <span class="p">},</span>
  <span class="n">osx_red</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">blue</span> <span class="o">=</span> <span class="mf">0.302</span><span class="p">,</span>
    <span class="n">green</span> <span class="o">=</span> <span class="mf">0.329</span><span class="p">,</span>
    <span class="n">red</span> <span class="o">=</span> <span class="mf">0.996</span>
  <span class="p">},</span>
  <span class="n">osx_green</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">...</span></code></pre></div>
<aside class="admonition tip">
	<div class="admonition-icon">
		<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 8 8">
  <path d="M3.41 0a.5.5 0 0 0-.13.06l-3 1.5a.5.5 0 1 0 .44.88l3-1.5a.5.5 0 0 0-.31-.94zm1 1.5a.5.5 0 0 0-.13.06l-4 2a.5.5 0 1 0 .44.88l4-2a.5.5 0 0 0-.31-.94zm0 2a.5.5 0 0 0-.13.06l-3 1.5a.5.5 0 0 0 .22.94h2a.5.5 0 0 0 .16-1l1.06-.56a.5.5 0 0 0-.31-.94zm-2.56 3.5a.5.5 0 0 0 .16 1h1a.5.5 0 1 0 0-1h-1a.5.5 0 0 0-.09 0 .5.5 0 0 0-.06 0z"
  transform="translate(1)" />
</svg>

	</div>
	
	
	<div class="admonition-content"><p>Lua does not include a function to easily get the keys of a table so
you have to use the <a href="https://www.lua.org/manual/5.3/manual.html#pairs"><code>pairs</code></a> function to loop over the
key/value pairs of the table. The <a href="http://www.hammerspoon.org/docs/hs.inspect.html"><code>hs.inspect</code></a> function is
convenient, but to get just the list of tables and the color names,
without the color definitions themselves, you can use the following
code (if you type this in the console you have to type it all in a
single line &ndash; and beware, the output is a long list):</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="kr">for</span> <span class="n">listname</span><span class="p">,</span><span class="n">colors</span> <span class="kr">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">hs.drawing</span><span class="p">.</span><span class="n">color.lists</span><span class="p">())</span> <span class="kr">do</span>
  <span class="n">print</span><span class="p">(</span><span class="n">listname</span><span class="p">)</span>
  <span class="kr">for</span> <span class="n">color</span><span class="p">,</span><span class="n">def</span> <span class="kr">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="kr">do</span>
    <span class="n">print</span><span class="p">(</span><span class="s2">&#34;  &#34;</span> <span class="o">..</span> <span class="n">color</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span></code></pre></div></div>
</aside>


<p>If we wanted to make the circle green, we can assign the configuration
value like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">spoon.MouseCircle</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">hs.drawing</span><span class="p">.</span><span class="n">color.hammerspoon</span><span class="p">.</span><span class="n">green</span></code></pre></div>
<p>The next time you invoke the <code>show()</code> method, either directly or
through the hotkey, you will see the circle in the new color.</p>

<aside class="admonition tip">
	<div class="admonition-icon">
		<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 8 8">
  <path d="M3.41 0a.5.5 0 0 0-.13.06l-3 1.5a.5.5 0 1 0 .44.88l3-1.5a.5.5 0 0 0-.31-.94zm1 1.5a.5.5 0 0 0-.13.06l-4 2a.5.5 0 1 0 .44.88l4-2a.5.5 0 0 0-.31-.94zm0 2a.5.5 0 0 0-.13.06l-3 1.5a.5.5 0 0 0 .22.94h2a.5.5 0 0 0 .16-1l1.06-.56a.5.5 0 0 0-.31-.94zm-2.56 3.5a.5.5 0 0 0 .16 1h1a.5.5 0 1 0 0-1h-1a.5.5 0 0 0-.09 0 .5.5 0 0 0-.06 0z"
  transform="translate(1)" />
</svg>

	</div>
	
	
	<div class="admonition-content"><p>(We will look at this in more detail in a future installment about
Lua, but in case you were wondering&hellip;)</p>

<p>You may have noticed that the configuration variable was accessed
with a dot (<code>spoon.MouseCircle.color</code>), and we also used it for some
function calls earlier (e.g. <a href="http://www.hammerspoon.org/docs/hs.notify.html#show"><code>hs.notify.show</code></a>, whereas for the
<code>show()</code> method we used a colon (<code>spoon.MouseCircle:show()</code>). The
latter is Luaâ€™s object-method-call notation, and its effect is to
pass the object on which the method is being called as an implicit
first argument called <code>self</code>. This is simply a syntactic shortcut,
i.e. the following two are equivalent:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">spoon.MouseCircle</span><span class="p">:</span><span class="n">show</span><span class="p">()</span>
<span class="n">spoon.MouseCircle</span><span class="p">.</span><span class="n">show</span><span class="p">(</span><span class="n">spoon.MouseCircle</span><span class="p">)</span></code></pre></div>
<p>Note that in the second statement, we are calling the method using
the dot notation, and explicitly passing the object as the first
argument. Normally you would use colon notation, but the alternative
can be useful when constructing function pointers. For example, if
you wanted to manually bind a second key to show the mouse circle,
you might initially try to use the following:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">hs.hotkey</span><span class="p">.</span><span class="n">bindSpec</span><span class="p">({</span> <span class="p">{</span><span class="s2">&#34;ctrl&#34;</span><span class="p">,</span> <span class="s2">&#34;alt&#34;</span><span class="p">,</span> <span class="s2">&#34;cmd&#34;</span> <span class="p">},</span> <span class="s2">&#34;p&#34;</span> <span class="p">},</span>
                   <span class="n">spoon.MouseCircle</span><span class="p">:</span><span class="n">show</span><span class="p">)</span></code></pre></div>
<p>But this results in an error. The correct way is to wrap the call in
an anonymous function:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">hs.hotkey</span><span class="p">.</span><span class="n">bindSpec</span><span class="p">({</span> <span class="p">{</span><span class="s2">&#34;ctrl&#34;</span><span class="p">,</span> <span class="s2">&#34;alt&#34;</span><span class="p">,</span> <span class="s2">&#34;cmd&#34;</span> <span class="p">},</span> <span class="s2">&#34;p&#34;</span> <span class="p">},</span>
                   <span class="kr">function</span><span class="p">()</span> <span class="n">spoon.MouseCircle</span><span class="p">:</span><span class="n">show</span><span class="p">()</span> <span class="kr">end</span><span class="p">)</span></code></pre></div>
<p>Alternatively, you can use the <a href="http://www.hammerspoon.org/docs/hs.fnutils.html#partial"><code>hs.fnutils.partial</code></a> function to
construct a function pointer that includes the correct first
argument:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">hs.hotkey</span><span class="p">.</span><span class="n">bindSpec</span><span class="p">({</span> <span class="p">{</span><span class="s2">&#34;ctrl&#34;</span><span class="p">,</span> <span class="s2">&#34;alt&#34;</span><span class="p">,</span> <span class="s2">&#34;cmd&#34;</span> <span class="p">},</span> <span class="s2">&#34;p&#34;</span> <span class="p">},</span>
                   <span class="n">hs.fnutils</span><span class="p">.</span><span class="n">partial</span><span class="p">(</span><span class="n">spoon.MouseCircle</span><span class="p">.</span><span class="n">show</span><span class="p">,</span>
                                      <span class="n">spoon.MouseCircle</span><span class="p">))</span></code></pre></div>
<p>This is more verbose than the previous example, but the technique
can be useful sometimes. Although Lua is not a full functional
language, it supports using functions as first-class values, and the
<a href="http://www.hammerspoon.org/docs/hs.fnutils.html"><code>hs.fnutils</code></a> extension includes a number of functions that make it
easy to use them.</p>
</div>
</aside>


<p>By now you know enough to use spoons with Hammerspoonâ€™s native
capabilities: <a href="http://www.hammerspoon.org/Spoons/">look for the ones you
want</a>, download and install them
by hand, and configure them in your <code>init.lua</code> using their
configuration variables and API. In the next sections you will learn
more about the minimum API of spoons, and how to install and configure
spoons in a more automated way.</p>

<h1 id="the-spoon-api">The Spoon API</h1>

<p>The advantage of using spoons is that you can count on them to adhere
to a <a href="https://github.com/Hammerspoon/hammerspoon/blob/master/SPOONS.md#api-conventions">defined
API</a>,
which makes it easier to automate their use. Although each spoon is
free to define additional variable and methods, the following are
standard:</p>

<ul>
<li><p><code>SPOON:init()</code> is called automatically (if it exists) by
<a href="http://www.hammerspoon.org/docs/hs.html#loadSpoon"><code>hs.loadSpoon</code></a> after loading the spoon, and can be used to
initialize variables or anything else needed by the Spoon.</p></li>

<li><p><code>SPOON:start()</code> should exist if the spoon requires any ongoing or
background processes such as timers or watchers of any kind.</p></li>

<li><p><code>SPOON:stop()</code> should exist if <code>start()</code> does, to stop any
background processes that were started by <code>start()</code>.</p></li>

<li><p><code>SPOON:bindHotkeys(map)</code> is exposed by spoons which allow binding
hotkeys to certain actions. Its <code>map</code> argument is a Lua table with
key/value entries of the following form: <code>ACTION = { MODS, KEY }</code>,
where ACTION is a string defined by the spoon (multiple such
actions can be defined), MODS is a list of key modifiers (valid
values are <code>&quot;cmd&quot;</code>, <code>&quot;alt&quot;</code>, <code>&quot;ctrl&quot;</code> and <code>&quot;shift&quot;</code>), and KEY is
the key to be bound, as shown in our previous example. All
available actions for a spoon should be listed in its
documentation.</p></li>
</ul>

<h1 id="automated-spoon-installation-and-configuration">Automated Spoon installation and configuration</h1>

<p>Once you develop a complex Hammerspoon configuration using spoons, you
may start wondering if there is an easy way to manage them. There are
no built-in mechanisms for automatically installing spoons, but you
can use a spoon called
<a href="http://www.hammerspoon.org/Spoons/SpoonInstall.html">SpoonInstall</a>
that implements this functionality. You can download it from
<a href="http://www.hammerspoon.org/Spoons/SpoonInstall.html">http://www.hammerspoon.org/Spoons/SpoonInstall.html</a>. Once installed,
you can use it to declaratively install, configure and run spoons. For
example, with SpoonInstall you can use the MouseCircle spoon as
follows:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">hs.loadSpoon</span><span class="p">(</span><span class="s2">&#34;SpoonInstall&#34;</span><span class="p">)</span>
<span class="n">spoon.SpoonInstall</span><span class="p">:</span><span class="n">andUse</span><span class="p">(</span><span class="s2">&#34;MouseCircle&#34;</span><span class="p">,</span> <span class="p">{</span>
                  <span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
                     <span class="n">color</span> <span class="o">=</span> <span class="n">hs.drawing</span><span class="p">.</span><span class="n">color.osx_red</span><span class="p">,</span>
                  <span class="p">},</span>
                  <span class="n">hotkeys</span> <span class="o">=</span> <span class="p">{</span>
                     <span class="n">show</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span> <span class="s2">&#34;ctrl&#34;</span><span class="p">,</span> <span class="s2">&#34;cmd&#34;</span><span class="p">,</span> <span class="s2">&#34;alt&#34;</span><span class="p">},</span> <span class="s2">&#34;d&#34;</span> <span class="p">}</span>
                  <span class="p">}})</span></code></pre></div>
<p>If the MouseCircle spoon is not yet installed,
<code>spoon.SpoonInstall:andUse()</code> will automatically download and install
it, and set its configuration variables and hotkeys according to the
declaration.</p>

<p>If there is nothing to configure in the spoon,
<code>spoon.SpoonInstall:andUse(&quot;SomeSpoon&quot;)</code> does exactly the same as
<code>hs.loadSpoon(&quot;SomeSpoon&quot;)</code>. But if you want to set configuration
variables, hotkey bindings or other parameters, the following keys are
recognized in the map provided as a second parameter:</p>

<ul>
<li><p><code>config</code> is a Lua table containing keys corresponding to
configuration variables in the spoon. In the example above,
<code>config = { color = hs.drawing.color.osx_red }</code> has the same
effect as setting <code>spoon.MouseCircle.color =
hs.drawing.color.osx_red</code></p></li>

<li><p><code>hotkeys</code> is a Lua table with the same structure as the mapping
parameter passed to the <code>bindHotkeys</code> method of the spoon. In our
example above, <code>hotkeys = { show = { { &quot;ctrl&quot;, &quot;cmd&quot;, &quot;alt&quot;}, &quot;d&quot;
} }</code> automatically triggers a call to
<code>spoon.MouseCircle:bindHotkeys({ show = { { &quot;ctrl&quot;, &quot;cmd&quot;, &quot;alt&quot;},
&quot;d&quot; } })</code>.</p></li>

<li><p><code>loglevel</code> sets the log level of the <code>logger</code> attribute within the
spoon, if it exists. The valid values for this attribute are
&lsquo;nothing&rsquo;, &lsquo;error&rsquo;, &lsquo;warning&rsquo;, &lsquo;info&rsquo;, &lsquo;debug&rsquo;, or &lsquo;verbose&rsquo;.</p></li>

<li><p><code>start</code> is a boolean value which indicates whether to call the
Spoonâ€™s <code>start()</code> method (if it has one) after configuring
everything else.</p></li>

<li><p><code>fn</code> specifies a function which will be called with the
freshly-loaded Spoon object as its first argument. This can be
used to execute other startup or configuration actions that are
not covered by the other attributes. For example, if you use the

<a href="http://www.hammerspoon.org/Spoons/Seal.html">Seal</a>
 spoon (a configurable launcher), you need to call its
<code>loadPlugins()</code> method to specify which Seal plugins to use. You
can achieve this with something like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">spoon.SpoonInstall</span><span class="p">:</span><span class="n">andUse</span><span class="p">(</span><span class="s2">&#34;Seal&#34;</span><span class="p">,</span>
  <span class="p">{</span> <span class="n">hotkeys</span> <span class="o">=</span> <span class="p">{</span> <span class="n">show</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span><span class="s2">&#34;cmd&#34;</span><span class="p">},</span> <span class="s2">&#34;space&#34;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
             <span class="n">s</span><span class="p">:</span><span class="n">loadPlugins</span><span class="p">({</span><span class="s2">&#34;apps&#34;</span><span class="p">,</span> <span class="s2">&#34;calc&#34;</span><span class="p">,</span> <span class="s2">&#34;safari_bookmarks&#34;</span><span class="p">})</span>
         <span class="kr">end</span><span class="p">,</span>
         <span class="n">start</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">})</span></code></pre></div></li>

<li><p><code>repo</code> indicates the repository from where the Spoon should be
installed if needed. Defaults to <code>&quot;default&quot;</code>, which indicates the
official Spoon repository at
<a href="http://www.hammerspoon.org/Spoons/">http://www.hammerspoon.org/Spoons/</a>. I keep a repository of
unofficial Spoons at <a href="http://zzamboni.org/zzSpoons/">http://zzamboni.org/zzSpoons/</a>, and others
may be available by the time you read this.</p></li>

<li><p><code>disable</code> can be set to <code>true</code> to disable the Spoon (easier than
commenting it out when you want to temporarily disable a spoon) in
your configuration.</p></li>
</ul>

<aside class="admonition tip">
	<div class="admonition-icon">
		<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 8 8">
  <path d="M3.41 0a.5.5 0 0 0-.13.06l-3 1.5a.5.5 0 1 0 .44.88l3-1.5a.5.5 0 0 0-.31-.94zm1 1.5a.5.5 0 0 0-.13.06l-4 2a.5.5 0 1 0 .44.88l4-2a.5.5 0 0 0-.31-.94zm0 2a.5.5 0 0 0-.13.06l-3 1.5a.5.5 0 0 0 .22.94h2a.5.5 0 0 0 .16-1l1.06-.56a.5.5 0 0 0-.31-.94zm-2.56 3.5a.5.5 0 0 0 .16 1h1a.5.5 0 1 0 0-1h-1a.5.5 0 0 0-.09 0 .5.5 0 0 0-.06 0z"
  transform="translate(1)" />
</svg>

	</div>
	
	
	<div class="admonition-content"><p>You can assign functions and modules to variables to improve
readability of your code. For example, in my <code>init.lua</code> file I make
the following assignment:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">Install</span><span class="o">=</span><span class="n">spoon.SpoonInstall</span></code></pre></div>
<p>Which allows me to write <code>Install:andUse(&quot;MouseCircle&quot;, â€¦â€‹ )</code>, which is
shorter and easier to read.</p>
</div>
</aside>


<h2 id="managing-repositories-and-spoons-using-spooninstall">Managing repositories and spoons using SpoonInstall</h2>

<p>Apart from the <code>andUse()</code> &ldquo;all-in-one&rdquo; method, SpoonInstall has
methods for specific repository- and spoon-maintenance operations. As
of this writing, there are two Spoon repositories: the official one at
<a href="http://www.hammerspoon.org/Spoons/">http://www.hammerspoon.org/Spoons/</a>, and my own at
<a href="http://zzamboni.org/zzSpoons/">http://zzamboni.org/zzSpoons/</a>, where I host some unofficial and
in-progress Spoons.</p>

<p>The configuration variable used to specify repositories is
<code>SpoonInstall.repos</code>. Its default value is the following, which
configures the official repository identified as &ldquo;default&rdquo;:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="p">{</span>
  <span class="n">default</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">url</span> <span class="o">=</span> <span class="s2">&#34;https://github.com/Hammerspoon/Spoons&#34;</span><span class="p">,</span>
      <span class="n">desc</span> <span class="o">=</span> <span class="s2">&#34;Main Hammerspoon Spoon repository&#34;</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>To configure a new repository, you can define an extra entry in this
variable. The following code creates an entry named &ldquo;zzspoons&rdquo; for my
Spoon repository:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="n">spoon.SpoonInstall</span><span class="p">.</span><span class="n">repos.zzspoons</span> <span class="o">=</span> <span class="p">{</span>
   <span class="n">url</span> <span class="o">=</span> <span class="s2">&#34;https://github.com/zzamboni/zzSpoons&#34;</span><span class="p">,</span>
   <span class="n">desc</span> <span class="o">=</span> <span class="s2">&#34;zzamboni&#39;s spoon repository&#34;</span><span class="p">,</span>
<span class="p">}</span></code></pre></div>
<p>After this, both &ldquo;zzspoons&rdquo; and &ldquo;default&rdquo; can be used as values to the
<code>repo</code> attribute in the <code>andUse()</code> method, and in any of the other
methods that take a repository identifier as a parameter. You can find
the full API documentation at
<a href="http://www.hammerspoon.org/Spoons/SpoonInstall.html">http://www.hammerspoon.org/Spoons/SpoonInstall.html</a>.</p>

<h1 id="conclusion">Conclusion</h1>

<p>Spoons are a great mechanism for structuring your Hammerspoon
configuration. If you want an example of a working configuration based
almost exclusively on Spoons, you can view my own Hammerspoon
configuration at <a href="https://github.com/zzamboni/dot-hammerspoon">https://github.com/zzamboni/dot-hammerspoon</a>.</p>
      </section>
      

  <ul class="list dib ml0 pl0" id="tags">
    <li class="b black dib mb2 mr3">Tags: </li>
    
      <li class="black dib mb2 mr2"><a href="/tags/hammerspoon" class="link mid-gray dim">hammerspoon</a> </li>
    
      <li class="black dib mb2 mr2"><a href="/tags/spoons" class="link mid-gray dim">spoons</a> </li>
    
      <li class="black dib mb2 mr2"><a href="/tags/howto" class="link mid-gray dim">howto</a> </li>
    
      <li class="black dib mb2 mr2"><a href="/tags/mac" class="link mid-gray dim">mac</a> </li>
    
  </ul>
  
  
  
  
  
    <div class="mt5 f6 gray nested-lh-copy bg-light-gray ph3 pv2 measure-wide-l">
      <ul class="list dib ml0 pl0">
        <li class="black dib mb2 mr2">
          Related:
        </li>
        
          
            <li class="mb2 mr3">
              <a href="/post/my-hammerspoon-configuration-with-commentary/" class="link mid-gray dim">
                 My Hammerspoon Configuration, With Commentary
              </a>
            </li>
          
        
          
            <li class="mb2 mr3">
              <a href="/post/just-enough-lua-to-be-productive-in-hammerspoon-part-2/" class="link mid-gray dim">
                 Just Enough Lua to Be Productive in Hammerspoon, Part 2
              </a>
            </li>
          
        
          
            <li class="mb2 mr3">
              <a href="/post/just-enough-lua-to-be-productive-in-hammerspoon-part-1/" class="link mid-gray dim">
                 Just Enough Lua to Be Productive in Hammerspoon, Part 1
              </a>
            </li>
          
        
          
            <li class="mb2 mr3">
              <a href="/post/fixing-outlook-to-omnifocus-script/" class="link mid-gray dim">
                 Fixing the Outlook-to-OmniFocus Script
              </a>
            </li>
          
        
          
        
          
            <li class="mb2 mr3">
              <a href="/post/getting-started-with-hammerspoon/" class="link mid-gray dim">
                 Getting Started With Hammerspoon
              </a>
            </li>
          
        
      </ul>
    </div>
  


      <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "zzamboni-org" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>
    <div class="ph3 mt2 mt6-ns">
      <div class="bg-light-gray pa3">
      <p class="list b mb3">What's in this Post</p>
      <nav id="TableOfContents">
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#using-a-spoon-to-locate-your-mouse">Using a Spoon to locate your mouse</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#the-spoon-api">The Spoon API</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#automated-spoon-installation-and-configuration">Automated Spoon installation and configuration</a>
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#managing-repositories-and-spoons-using-spooninstall">Managing repositories and spoons using SpoonInstall</a></li>
</ul></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#conclusion">Conclusion</a></li>
</ul>
</nav>
</div>
<br/></div>
  </div>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
    <a class="f5 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://zzamboni.org/" >
      &copy; 2018 Diego Zamboni
    </a>
    <div class="f5 fw1 no-underline white-70 dn dib-ns tl pv2 ph3" >Made with love, coffee,&nbsp;and published using <a class="no-underline hover-white white-70" href="http://gohugo.io/">Hugo 0.45</a>
            &plus; <a class="no-underline hover-white white-70" href="https://github.com/budparr/gohugo-theme-ananke">Ananke</a></div>
    



  <a href="https://twitter.com/zzamboni" class="link-transition twitter link dib z-999 pt3 pt0-l mr2" title="Twitter link">
    <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

  </a>




  </div>
</footer>

    <script src="https://zzamboni.org/dist/app.bundle.js" async></script>

  </body>
</html>
