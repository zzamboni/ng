<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
     
    <title>zzamboni.org  | My Emacs Configuration, With Commentary</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
     <meta name="generator" content="Hugo 0.39" />
      
      
        <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
      

     <link href='http://zzamboni.org/dist/main.css' rel='stylesheet' type="text/css" />
     <link href='http://zzamboni.org/css/site.css' rel='stylesheet' type="text/css" />
     <link href='http://zzamboni.org/css/syntax.css' rel='stylesheet' type="text/css" />

     

      <meta property="og:title" content="My Emacs Configuration, With Commentary" />
<meta property="og:description" content="Last update: April 19, 2018
I have enjoyed slowly converting my configuration files to literate programming style style using org-mode in Emacs. I previously posted my Elvish configuration, and now it&rsquo;s the turn of my Emacs configuration file. The text below is included directly from my init.org file. Please note that the text below is a snapshot as the file stands as of the date shown above, but it is always evolving." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://zzamboni.org/post/my-emacs-configuration-with-commentary/" />



<meta property="article:published_time" content="2017-12-17T20:14:00&#43;01:00"/>

<meta property="article:modified_time" content="2017-12-17T20:14:00&#43;01:00"/>











<meta itemprop="name" content="My Emacs Configuration, With Commentary">
<meta itemprop="description" content="Last update: April 19, 2018
I have enjoyed slowly converting my configuration files to literate programming style style using org-mode in Emacs. I previously posted my Elvish configuration, and now it&rsquo;s the turn of my Emacs configuration file. The text below is included directly from my init.org file. Please note that the text below is a snapshot as the file stands as of the date shown above, but it is always evolving.">


<meta itemprop="datePublished" content="2017-12-17T20:14:00&#43;01:00" />
<meta itemprop="dateModified" content="2017-12-17T20:14:00&#43;01:00" />
<meta itemprop="wordCount" content="6623">



<meta itemprop="keywords" content="config,howto,literateprogramming,literateconfig,emacs," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="My Emacs Configuration, With Commentary"/>
<meta name="twitter:description" content="Last update: April 19, 2018
I have enjoyed slowly converting my configuration files to literate programming style style using org-mode in Emacs. I previously posted my Elvish configuration, and now it&rsquo;s the turn of my Emacs configuration file. The text below is included directly from my init.org file. Please note that the text below is a snapshot as the file stands as of the date shown above, but it is always evolving."/>

        
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-109878074-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-2108021418174840",
    enable_page_level_ads: true
  });
</script>
      
      <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon.png">
      <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
      <link rel="manifest" href="/manifest.json">
      <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  </head>

  <body class="ma0 avenir bg-near-white production">

    
   
  

  
  
  <header class="cover bg-center" style="background-image: url('http://zzamboni.org/images/emacs-logo.svg');">
    <div class="pb5-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://zzamboni.org/" class="f3 fw2 hover-white no-underline white-90 dib">
      zzamboni.org
    </a>
    <div class="flex-l items-center">
      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/post/" title="Blog page">
              Blog
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/book/" title="Books page">
              Books
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/code/" title="Code page">
              Code
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/tags/" title="Tags page">
              Tags
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/contact/" title="Contact page">
              Contact
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About page">
              About
            </a>
          </li>
          
        </ul>
      
      



  <a href="https://twitter.com/zzamboni" class="link-transition twitter link dib z-999 pt3 pt0-l mr2" title="Twitter link">
    <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

  </a>




    </div>
  </div>
</nav>

      <div class="tc-l pv4 ph3 ph4-ns">
        <h1 class="f2 f1-l fw2 white-90 mb0 mt0 lh-title">My Emacs Configuration, With Commentary</h1>
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <p class="f6 b helvetica tracked">
        
        POST
      </p>
      <h1 class="f1 athelas">
        My Emacs Configuration, With Commentary
      </h1>
        
        
      <time class="f6 mv4 dib tracked" datetime="2017-12-17T20:14:00&#43;01:00">
        December 17, 2017
      </time>
      <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray">
        

<p>Last update: <strong>April 19, 2018</strong></p>

<p>I have enjoyed slowly converting my configuration files to <a href="http://www.howardism.org/Technical/Emacs/literate-programming-tutorial.html">literate programming</a> style style using org-mode in Emacs. I previously posted my <a href="../my-elvish-configuration-with-commentary/">Elvish configuration</a>, and now it&rsquo;s the turn of my Emacs configuration file. The text below is included directly from my <a href="https://github.com/zzamboni/dot_emacs/blob/master/init.org">init.org</a> file. Please note that the text below is a snapshot as the file stands as of the date shown above, but it is always evolving. See the <a href="https://github.com/zzamboni/dot_emacs/blob/master/init.org">init.org file in GitHub</a> for my current, live configuration, and the generated file at <a href="https://github.com/zzamboni/dot_emacs/blob/master/init.el">https://github.com/zzamboni/dot_emacs/blob/master/init.el</a>.</p>

<h2 id="references">References</h2>

<p>Emacs config is an art, and I have learned a lot by reading through other people&rsquo;s config files, and from many other resources. These are some of the best ones (several are also written in org mode). You will find snippets from all of these (and possibly others) throughout my config.</p>

<ul>
<li><a href="http://pages.sachachua.com/.emacs.d/Sacha.html">Sacha Chua&rsquo;s Emacs Configuration</a></li>
<li><a href="https://github.com/daedreth/UncleDavesEmacs#user-content-ido-and-why-i-started-using-helm">Uncle Dave&rsquo;s Emacs config</a></li>
<li><a href="https://github.com/PythonNut/emacs-config">PythonNut&rsquo;s Emacs config</a></li>
<li><a href="https://www.masteringemacs.org/">Mastering Emacs</a></li>
</ul>

<h2 id="customized-variables">Customized variables</h2>

<p>Emacs has its own <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Easy-Customization.html#Easy-Customization">Customization mechanism</a> for easily customizing many parameters. To make it easier to manage, I keep the customized variables and faces in a separate file and load it from the main file. A lot of my custom settings are configured from this init file as well, but there are always some which I change by hand for added flexibility.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">custom-file</span> <span class="s">&#34;~/.emacs.d/custom.el&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">load</span> <span class="nv">custom-file</span><span class="p">)</span></code></pre></div>
<p>Here is the current contents of my <a href="https://github.com/zzamboni/dot-emacs/blob/master/custom.el">custom.el</a> file.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">custom-set-variables</span>
 <span class="c1">;; custom-set-variables was added by Custom.</span>
 <span class="c1">;; If you edit it by hand, you could mess it up, so be careful.</span>
 <span class="c1">;; Your init file should contain only one such instance.</span>
 <span class="c1">;; If there is more than one, they won&#39;t work right.</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">ad-redefinition-action</span> <span class="p">(</span><span class="nb">quote</span> <span class="nv">accept</span><span class="p">))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">backup-directory-alist</span> <span class="p">(</span><span class="nb">quote</span> <span class="p">((</span><span class="s">&#34;.&#34;</span> <span class="o">.</span> <span class="s">&#34;~/.emacs.d/backups&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">cfengine-indent</span> <span class="mi">1</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">column-number-mode</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">custom-safe-themes</span>
   <span class="p">(</span><span class="nb">quote</span>
    <span class="p">(</span><span class="s">&#34;6ac7c0f959f0d7853915012e78ff70150bfbe2a69a1b703c3ac4184f9ae3ae02&#34;</span> <span class="s">&#34;8e4efc4bed89c4e67167fdabff77102abeb0b1c203953de1e6ab4d2e3a02939a&#34;</span> <span class="s">&#34;a1a966cf2e87be6a148158c79863440ba2e45aa06cc214341feafe5c6deca4f2&#34;</span> <span class="s">&#34;3eb2b5607b41ad8a6da75fe04d5f92a46d1b9a95a202e3f5369e2cdefb7aac5c&#34;</span> <span class="s">&#34;3d0142352ce19c860047ad7402546944f84c270e84ae479beddbc2608268e0e5&#34;</span> <span class="s">&#34;a33858123d3d3ca10c03c657693881b9f8810c9e242a62f1ad6380adf57b031c&#34;</span> <span class="s">&#34;a40eac965142a2057269f8b2abd546b71a0e58e733c6668a62b1ad1aa7669220&#34;</span> <span class="s">&#34;7be789f201ea16242dab84dd5f225a55370dbecae248d4251edbd286fe879cfa&#34;</span> <span class="s">&#34;94dac4d15d12ba671f77a93d84ad9f799808714d4c5d247d5fd944df951b91d6&#34;</span> <span class="s">&#34;4d8fab23f15347bce54eb7137789ab93007010fa47296c2f36757ff84b5b3c8a&#34;</span> <span class="nv">default</span><span class="p">)))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">global-visible-mark-mode</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">indent-tabs-mode</span> <span class="no">nil</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">jiralib-url</span> <span class="s">&#34;https://jira.swisscom.com&#34;</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">js-indent-level</span> <span class="mi">2</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">kill-whole-line</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">load-prefer-newer</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">lua-indent-level</span> <span class="mi">2</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">mac-command-modifier</span> <span class="p">(</span><span class="nb">quote</span> <span class="nv">meta</span><span class="p">))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">mac-option-modifier</span> <span class="p">(</span><span class="nb">quote</span> <span class="nv">alt</span><span class="p">))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">mac-right-option-modifier</span> <span class="p">(</span><span class="nb">quote</span> <span class="nv">super</span><span class="p">))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">mouse-yank-at-point</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-agenda-files</span> <span class="no">nil</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-babel-shell-names</span>
   <span class="p">(</span><span class="nb">quote</span>
    <span class="p">(</span><span class="s">&#34;sh&#34;</span> <span class="s">&#34;bash&#34;</span> <span class="s">&#34;zsh&#34;</span> <span class="s">&#34;fish&#34;</span> <span class="s">&#34;csh&#34;</span> <span class="s">&#34;ash&#34;</span> <span class="s">&#34;dash&#34;</span> <span class="s">&#34;ksh&#34;</span> <span class="s">&#34;mksh&#34;</span> <span class="s">&#34;posh&#34;</span><span class="p">)))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-confirm-babel-evaluate</span> <span class="no">nil</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-default-notes-file</span> <span class="s">&#34;~/Dropbox/org/notes.org&#34;</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-directory</span> <span class="s">&#34;~/Dropbox/org&#34;</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-entities-user</span>
   <span class="p">(</span><span class="nb">quote</span>
    <span class="p">((</span><span class="s">&#34;llangle&#34;</span> <span class="s">&#34;\\llangle&#34;</span> <span class="no">t</span> <span class="s">&#34;&amp;lang;&amp;lang;&#34;</span> <span class="s">&#34;&lt;&lt;&#34;</span> <span class="s">&#34;&lt;&lt;&#34;</span> <span class="s">&#34;《&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;rrangle&#34;</span> <span class="s">&#34;\\rrangle&#34;</span> <span class="no">t</span> <span class="s">&#34;&amp;rang;&amp;rang;&#34;</span> <span class="s">&#34;&gt;&gt;&#34;</span> <span class="s">&#34;&gt;&gt;&#34;</span> <span class="s">&#34;》&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-hide-emphasis-markers</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-hugo-use-code-for-kbd</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-journal-dir</span> <span class="s">&#34;~/Documents/logbook&#34;</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-latex-packages-alist</span> <span class="p">(</span><span class="nb">quote</span> <span class="p">((</span><span class="s">&#34;&#34;</span> <span class="s">&#34;MnSymbol&#34;</span> <span class="no">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-log-done</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-mac-grab-Acrobat-app-p</span> <span class="no">nil</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-mac-grab-devonthink-app-p</span> <span class="no">nil</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-plantuml-jar-path</span> <span class="s">&#34;/usr/local/Cellar/plantuml/1.2017.18/libexec/plantuml.jar&#34;</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-src-fontify-natively</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-src-tab-acts-natively</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-startup-indented</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-structure-template-alist</span>
   <span class="p">(</span><span class="nb">quote</span>
    <span class="p">((</span><span class="s">&#34;a&#34;</span> <span class="o">.</span> <span class="s">&#34;export ascii&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;c&#34;</span> <span class="o">.</span> <span class="s">&#34;center&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;C&#34;</span> <span class="o">.</span> <span class="s">&#34;comment&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;e&#34;</span> <span class="o">.</span> <span class="s">&#34;example&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;E&#34;</span> <span class="o">.</span> <span class="s">&#34;export&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;h&#34;</span> <span class="o">.</span> <span class="s">&#34;export html&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;l&#34;</span> <span class="o">.</span> <span class="s">&#34;export latex&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;q&#34;</span> <span class="o">.</span> <span class="s">&#34;quote&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;s&#34;</span> <span class="o">.</span> <span class="s">&#34;src&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;v&#34;</span> <span class="o">.</span> <span class="s">&#34;verse&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;n&#34;</span> <span class="o">.</span> <span class="s">&#34;note&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;d&#34;</span> <span class="o">.</span> <span class="s">&#34;description&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">package-archives</span>
   <span class="p">(</span><span class="nb">quote</span>
    <span class="p">((</span><span class="s">&#34;gnu&#34;</span> <span class="o">.</span> <span class="s">&#34;https://elpa.gnu.org/packages/&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;marmalade&#34;</span> <span class="o">.</span> <span class="s">&#34;https://marmalade-repo.org/packages/&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;melpa&#34;</span> <span class="o">.</span> <span class="s">&#34;https://melpa.org/packages/&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">package-selected-packages</span>
   <span class="p">(</span><span class="nb">quote</span>
    <span class="p">(</span><span class="nv">org-capture</span> <span class="nv">org-babel</span> <span class="nv">ox-texinfo</span> <span class="nv">gist</span> <span class="nv">helm-flx</span> <span class="nv">which-key</span> <span class="nv">spaceline</span> <span class="nv">pretty-mode</span> <span class="nv">visual-regexp-steroids</span> <span class="nv">ox-hugo</span> <span class="nv">adaptive-wrap</span> <span class="nv">yankpad</span> <span class="nv">smart-mode-line</span> <span class="nv">org-plus-contrib</span> <span class="nv">ob-cfengine3</span> <span class="nv">org-journal</span> <span class="nv">ox-asciidoc</span> <span class="nv">org-jira</span> <span class="nv">ox-jira</span> <span class="nv">org-bullets</span> <span class="nv">ox-reveal</span> <span class="nv">lispy</span> <span class="nv">parinfer</span> <span class="nv">uniquify</span> <span class="nv">csv</span> <span class="nv">all-the-icons</span> <span class="nv">toc-org</span> <span class="nv">helm</span> <span class="nv">cider</span> <span class="nv">clojure-mode</span> <span class="nv">ido-completing-read+</span> <span class="nv">writeroom-mode</span> <span class="nv">crosshairs</span> <span class="nv">ox-confluence</span> <span class="nv">ox-md</span> <span class="nv">inf-ruby</span> <span class="nv">ob-plantuml</span> <span class="nv">ob-ruby</span> <span class="nv">darktooth-theme</span> <span class="nv">kaolin-themes</span> <span class="nv">htmlize</span> <span class="nv">ag</span> <span class="nv">col-highlight</span> <span class="nv">nix-mode</span> <span class="nv">easy-hugo</span> <span class="nv">elvish-mode</span> <span class="nv">zen-mode</span> <span class="nv">racket-mode</span> <span class="nv">package-lint</span> <span class="nv">scala-mode</span> <span class="nv">go-mode</span> <span class="nv">wc-mode</span> <span class="nv">neotree</span> <span class="nv">applescript-mode</span> <span class="nv">ack</span> <span class="nv">magit</span> <span class="nv">clj-refactor</span> <span class="nv">yaml-mode</span> <span class="nv">visual-fill-column</span> <span class="nv">visible-mark</span> <span class="nb">use-package</span> <span class="nv">unfill</span> <span class="nv">typopunct</span> <span class="nv">smooth-scrolling</span> <span class="nv">smex</span> <span class="nv">smartparens</span> <span class="nv">rainbow-delimiters</span> <span class="nv">projectile</span> <span class="nv">markdown-mode</span> <span class="nv">magit-popup</span> <span class="nv">lua-mode</span> <span class="nv">keyfreq</span> <span class="nv">imenu-anywhere</span> <span class="nv">iedit</span> <span class="nv">ido-ubiquitous</span> <span class="nv">hl-sexp</span> <span class="nv">gruvbox-theme</span> <span class="nv">git-commit</span> <span class="nv">fish-mode</span> <span class="nv">exec-path-from-shell</span> <span class="nv">company</span> <span class="nv">clojure-mode-extra-font-locking</span> <span class="nv">clojure-cheatsheet</span> <span class="nv">aggressive-indent</span> <span class="nv">adoc-mode</span> <span class="nv">4clojure</span><span class="p">)))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">read-buffer-completion-ignore-case</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">read-file-name-completion-ignore-case</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">reb-re-syntax</span> <span class="p">(</span><span class="nb">quote</span> <span class="nf">string</span><span class="p">))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">safe-local-variable-values</span>
   <span class="p">(</span><span class="nb">quote</span>
    <span class="p">((</span><span class="nf">eval</span> <span class="nv">add-hook</span>
           <span class="p">(</span><span class="nb">quote</span> <span class="nv">after-save-hook</span><span class="p">)</span>
           <span class="p">(</span><span class="nb">function</span> <span class="nv">org-hugo-export-wim-to-md-after-save</span><span class="p">)</span>
           <span class="nb">:append</span> <span class="nb">:local</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">org-adapt-indentation</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">org-edit-src-content-indentation</span> <span class="o">.</span> <span class="mi">2</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">show-trailing-whitespace</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">sml/replacer-regexp-list</span>
   <span class="p">(</span><span class="nb">quote</span>
    <span class="p">((</span><span class="s">&#34;^~/org&#34;</span> <span class="s">&#34;:Org:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^~/\\.emacs\\.d/elpa/&#34;</span> <span class="s">&#34;:ELPA:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^~/\\.emacs\\.d/&#34;</span> <span class="s">&#34;:ED:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^/sudo:.*:&#34;</span> <span class="s">&#34;:SU:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^~/Documents/&#34;</span> <span class="s">&#34;:Doc:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^~/Dropbox/&#34;</span> <span class="s">&#34;:DB:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^:\\([^:]*\\):Documento?s/&#34;</span> <span class="s">&#34;:\\1/Doc:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^~/[Gg]it/&#34;</span> <span class="s">&#34;:Git:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^~/[Gg]it[Hh]ub/&#34;</span> <span class="s">&#34;:Git:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^~/[Gg]it\\([Hh]ub\\|\\)-?[Pp]rojects/&#34;</span> <span class="s">&#34;:Git:&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^:DB:Personal/writing/learning-cfengine-3/learning-cfengine-3/&#34;</span> <span class="s">&#34;[cf-learn]&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^:DB:Personal/devel/zzamboni.org/zzamboni.org/&#34;</span> <span class="s">&#34;[zz.org]&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="s">&#34;^\\[zz.org\\]content/post/&#34;</span> <span class="s">&#34;[zz.org/posts]&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">tab-width</span> <span class="mi">2</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">tool-bar-mode</span> <span class="no">nil</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">use-package-always-ensure</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">vr/engine</span> <span class="p">(</span><span class="nb">quote</span> <span class="nv">pcre2el</span><span class="p">)))</span>
<span class="p">(</span><span class="nv">custom-set-faces</span>
 <span class="c1">;; custom-set-faces was added by Custom.</span>
 <span class="c1">;; If you edit it by hand, you could mess it up, so be careful.</span>
 <span class="c1">;; Your init file should contain only one such instance.</span>
 <span class="c1">;; If there is more than one, they won&#39;t work right.</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">default</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="no">nil</span> <span class="nb">:stipple</span> <span class="no">nil</span> <span class="nb">:background</span> <span class="s">&#34;#282828&#34;</span> <span class="nb">:foreground</span> <span class="s">&#34;#FDF4C1&#34;</span> <span class="nb">:inverse-video</span> <span class="no">nil</span> <span class="nb">:box</span> <span class="no">nil</span> <span class="nb">:strike-through</span> <span class="no">nil</span> <span class="nb">:overline</span> <span class="no">nil</span> <span class="nb">:underline</span> <span class="no">nil</span> <span class="nb">:slant</span> <span class="nv">normal</span> <span class="nb">:weight</span> <span class="nv">normal</span> <span class="nb">:height</span> <span class="mi">160</span> <span class="nb">:width</span> <span class="nv">normal</span> <span class="nb">:foundry</span> <span class="s">&#34;nil&#34;</span> <span class="nb">:family</span> <span class="s">&#34;Inconsolata&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">col-highlight</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:background</span> <span class="s">&#34;#3c3836&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">fixed-pitch</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:family</span> <span class="s">&#34;Inconsolata&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">linum</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:background</span> <span class="s">&#34;#282828&#34;</span> <span class="nb">:foreground</span> <span class="s">&#34;#504945&#34;</span> <span class="nb">:height</span> <span class="mi">140</span> <span class="nb">:family</span> <span class="s">&#34;Inconsolata&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">markup-meta-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;gray40&#34;</span> <span class="nb">:height</span> <span class="mi">140</span> <span class="nb">:family</span> <span class="s">&#34;Inconsolata&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">markup-title-0-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="nv">markup-gen-face</span> <span class="nb">:height</span> <span class="mf">1.6</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">markup-title-1-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="nv">markup-gen-face</span> <span class="nb">:height</span> <span class="mf">1.5</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">markup-title-2-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="nv">markup-gen-face</span> <span class="nb">:height</span> <span class="mf">1.4</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">markup-title-3-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="nv">markup-gen-face</span> <span class="nb">:weight</span> <span class="nv">bold</span> <span class="nb">:height</span> <span class="mf">1.3</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">markup-title-5-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="nv">markup-gen-face</span> <span class="nb">:underline</span> <span class="no">t</span> <span class="nb">:height</span> <span class="mf">1.1</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-block</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="nv">fixed-pitch</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-code</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="p">(</span><span class="nv">shadow</span> <span class="nv">fixed-pitch</span><span class="p">)))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-document-info</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;dark orange&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-document-info-keyword</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="p">(</span><span class="nv">shadow</span> <span class="nv">fixed-pitch</span><span class="p">)))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-document-title</span> <span class="p">((((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">16777215</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#3FD7E5&#34;</span> <span class="nb">:weight</span> <span class="nv">bold</span><span class="p">))</span> <span class="p">(((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">255</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#00d7ff&#34;</span> <span class="nb">:weight</span> <span class="nv">bold</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-level-1</span> <span class="p">((((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">16777215</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#FE8019&#34;</span><span class="p">))</span> <span class="p">(((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">255</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#ff8700&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-level-2</span> <span class="p">((((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">16777215</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#B8BB26&#34;</span><span class="p">))</span> <span class="p">(((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">255</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#afaf00&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-level-3</span> <span class="p">((((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">16777215</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#83A598&#34;</span><span class="p">))</span> <span class="p">(((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">255</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#87afaf&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-level-4</span> <span class="p">((((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">16777215</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#FABD2F&#34;</span><span class="p">))</span> <span class="p">(((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">255</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#ffaf00&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-level-5</span> <span class="p">((((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">16777215</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#427B58&#34;</span><span class="p">))</span> <span class="p">(((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">255</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#5f8787&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-level-6</span> <span class="p">((((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">16777215</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#B8BB26&#34;</span><span class="p">))</span> <span class="p">(((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">255</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#afaf00&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-level-7</span> <span class="p">((((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">16777215</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#FB4933&#34;</span><span class="p">))</span> <span class="p">(((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">255</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#d75f5f&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-level-8</span> <span class="p">((((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">16777215</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#83A598&#34;</span><span class="p">))</span> <span class="p">(((</span><span class="nv">class</span> <span class="nv">color</span><span class="p">)</span> <span class="p">(</span><span class="nv">min-colors</span> <span class="mi">255</span><span class="p">))</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#87afaf&#34;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-link</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;royal blue&#34;</span> <span class="nb">:underline</span> <span class="no">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-meta-line</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="p">(</span><span class="nv">font-lock-comment-face</span> <span class="nv">fixed-pitch</span><span class="p">)))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-property-value</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="nv">fixed-pitch</span><span class="p">)))</span> <span class="no">t</span><span class="p">)</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-special-keyword</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="p">(</span><span class="nv">font-lock-comment-face</span> <span class="nv">fixed-pitch</span><span class="p">)))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-tag</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="p">(</span><span class="nv">shadow</span> <span class="nv">fixed-pitch</span><span class="p">)</span> <span class="nb">:weight</span> <span class="nv">bold</span> <span class="nb">:height</span> <span class="mf">0.8</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-verbatim</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:inherit</span> <span class="p">(</span><span class="nv">shadow</span> <span class="nv">fixed-pitch</span><span class="p">)))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">variable-pitch</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:weight</span> <span class="nv">light</span> <span class="nb">:height</span> <span class="mi">180</span> <span class="nb">:family</span> <span class="s">&#34;Source Sans Pro&#34;</span><span class="p">)))))</span></code></pre></div>
<h2 id="setting-up-the-package-system">Setting up the package system</h2>

<p>I use the <a href="https://www.masteringemacs.org/article/spotlight-use-package-a-declarative-configuration-tool">wonderful use-package</a> to manage most of the packages in my installation (one exception is <code>org-mode</code>, see below). As this is not bundled yet with Emacs, the first thing we do is install it by hand. All other packages are then declaratively installed and configured with <code>use-package</code>. This makes it possible to fully bootstrap Emacs using only this config file, everything else is downloaded, installed and configured automatically.</p>

<p>First, we declare the package repositories to use.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;package-archives</span>
                        <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;gnu&#34;</span>       <span class="o">.</span> <span class="s">&#34;https://elpa.gnu.org/packages/&#34;</span><span class="p">)</span>
                          <span class="p">(</span><span class="s">&#34;marmalade&#34;</span> <span class="o">.</span> <span class="s">&#34;https://marmalade-repo.org/packages/&#34;</span><span class="p">)</span>
                          <span class="p">(</span><span class="s">&#34;melpa&#34;</span>     <span class="o">.</span> <span class="s">&#34;https://melpa.org/packages/&#34;</span><span class="p">)))</span></code></pre></div>
<p>Then we initialize the package system, refresh the list of packages and install <code>use-package</code> if needed.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">package-initialize</span><span class="p">)</span>

<span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">not</span> <span class="nv">package-archive-contents</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">package-refresh-contents</span><span class="p">))</span>

<span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nv">package-installed-p</span> <span class="ss">&#39;use-package</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">package-install</span> <span class="ss">&#39;use-package</span><span class="p">))</span></code></pre></div>
<p>Finally, we load <code>use-package</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;use-package</span><span class="p">)</span></code></pre></div>
<p>We set some configuration for <code>use-package</code>. The <code>use-package-always-ensure</code> variable indicates that <code>use-package</code> should always try to install missing packages. For some libraries this is not appropriate, and in those cases you see the <code>:ensure nil</code> declaration as part of the <code>use-package</code> statement. This applies mainly to libraries which are installed as part of some other package (happens mostly with some libraries that come with org-mode).</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;use-package-always-ensure</span> <span class="no">t</span><span class="p">)</span></code></pre></div>
<p>This variable tells Emacs to prefer the <code>.el</code> file if it&rsquo;s newer, even if there is a corresponding <code>.elc</code> file. Also, use <code>auto-compile</code> to autocompile files as needed.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;load-prefer-newer</span> <span class="no">t</span><span class="p">)</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">auto-compile</span>
  <span class="nb">:config</span> <span class="p">(</span><span class="nv">auto-compile-on-load-mode</span><span class="p">))</span></code></pre></div>
<p>Set the load path to the directories from where I sometimes load things outside the package system. Note that the path for <code>org-mode</code> (which I load from a checkout of its git repository) is set as part of its <code>use-package</code> declaration, so it doesn&rsquo;t appear here.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;load-path</span> <span class="s">&#34;~/.emacs.d/lisp&#34;</span><span class="p">)</span></code></pre></div>
<h2 id="settings">Settings</h2>

<h3 id="proxy-settings">Proxy settings</h3>

<p>These are two short functions I wrote to be able to set/unset proxy settings within Emacs. I haven&rsquo;t bothered to improve or automate this, as I pretty much only need it to be able to install packages sometimes when I&rsquo;m at work. For now I just call them manually with <code>M-x zz/(un)set-proxy</code> when I need to.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">zz/set-proxy</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">customize-set-variable</span> <span class="nv">url-proxy-services</span> <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;http&#34;</span> <span class="o">.</span> <span class="s">&#34;proxy.corproot.net:8079&#34;</span><span class="p">)</span>
                                               <span class="p">(</span><span class="s">&#34;https&#34;</span> <span class="o">.</span> <span class="s">&#34;proxy.corproot.net:8079&#34;</span><span class="p">))))</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">zz/unset-proxy</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">customize-set-variable</span> <span class="nv">url-proxy-services</span> <span class="no">nil</span><span class="p">))</span></code></pre></div>
<h3 id="miscellaneous-settings">Miscellaneous settings</h3>

<ul>
<li><p>This is probably one of my oldest settings - I remember adding it around 1993 when I started learning Emacs, and it has been in my config ever since. When <code>time-stamp</code> is run before every save, the string <code>Time-stamp: &lt;&gt;</code> in the first 8 lines of the file will be updated with the current timestamp.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;before-save-hook</span> <span class="ss">&#39;time-stamp</span><span class="p">)</span></code></pre></div></li>

<li><p>When at the beginning of the line, make <code>Ctrl-K</code> remove the whole line, instead of just emptying it.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;kill-whole-line</span> <span class="no">t</span><span class="p">)</span></code></pre></div></li>

<li><p>Paste text where the cursor is, not where the mouse is.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;mouse-yank-at-point</span> <span class="no">t</span><span class="p">)</span></code></pre></div></li>

<li><p>Make completion case-insensitive.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">completion-ignore-case</span> <span class="no">t</span><span class="p">)</span>
<span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;read-file-name-completion-ignore-case</span> <span class="no">t</span><span class="p">)</span>
<span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;read-buffer-completion-ignore-case</span> <span class="no">t</span><span class="p">)</span></code></pre></div></li>

<li><p>Show line numbers (disabled for now because it causes performance issues in very large buffers).</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">global-linum-mode</span><span class="p">)</span></code></pre></div></li>

<li><p>Highlight trailing whitespace in red, so it&rsquo;s easily visible</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;show-trailing-whitespace</span> <span class="no">t</span><span class="p">)</span></code></pre></div></li>

<li><p>Highlight matching parenthesis</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">show-paren-mode</span><span class="p">)</span></code></pre></div></li>

<li><p>Don&rsquo;t use hard tabs</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;indent-tabs-mode</span> <span class="no">nil</span><span class="p">)</span></code></pre></div></li>

<li><p>Emacs automatically creates backup files, by default in the same folder as the original file, which often leaves backup files behind. This tells Emacs to <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Backup-Files.html">put all backups in ~/.emacs.d/backups</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;backup-directory-alist</span> <span class="o">`</span><span class="p">((</span><span class="s">&#34;.&#34;</span> <span class="o">.</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">&#34;backups&#34;</span><span class="p">))))</span></code></pre></div></li>

<li><p><a href="http://emacswiki.org/emacs/WinnerMode">WinnerMode</a> makes it possible to cycle and undo window configuration changes (i.e. arrangement of panels, etc.)</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">fboundp</span> <span class="ss">&#39;winner-mode</span><span class="p">)</span> <span class="p">(</span><span class="nv">winner-mode</span><span class="p">))</span></code></pre></div></li>

<li><p>Add &ldquo;unfill&rdquo; commands to parallel the &ldquo;fill&rdquo; ones, bind <kbd>A-q</kbd> to <code>unfill-paragraph</code> and rebind <kbd>M-q</kbd> to the <code>unfill-toggle</code> command, which fills/unfills paragraphs alternatively.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">unfill</span>
  <span class="nb">:bind</span>
  <span class="p">(</span><span class="s">&#34;M-q&#34;</span> <span class="o">.</span> <span class="nv">unfill-toggle</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&#34;A-q&#34;</span> <span class="o">.</span> <span class="nv">unfill-paragraph</span><span class="p">))</span></code></pre></div></li>

<li><p>Save the place of the cursor in each file, and restore it upon opening it again.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">saveplace</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">save-place-mode</span><span class="p">))</span></code></pre></div></li>

<li><p>Provide mode-specific &ldquo;bookmarks&rdquo; - press <code>M-i</code> and you will be presented with a list of elements to which you can navigate - they can be headers in org-mode, function names in emacs-lisp, etc.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">imenu-anywhere</span>
  <span class="nb">:bind</span>
  <span class="p">(</span><span class="s">&#34;M-i&#34;</span> <span class="o">.</span> <span class="nv">helm-imenu-anywhere</span><span class="p">))</span></code></pre></div></li>

<li><p>Smooth scrolling (line by line) instead of jumping by half-screens.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">smooth-scrolling</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">smooth-scrolling-mode</span> <span class="mi">1</span><span class="p">))</span></code></pre></div></li>

<li><p>Delete trailing whitespace before saving a file.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;before-save-hook</span> <span class="ss">&#39;delete-trailing-whitespace</span><span class="p">)</span></code></pre></div></li>

<li><p>Suppress &ldquo;ad-handle-definition: .. redefined&rdquo; warnings during Emacs startup.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;ad-redefinition-action</span> <span class="ss">&#39;accept</span><span class="p">)</span></code></pre></div></li>
</ul>

<h2 id="keybindings">Keybindings</h2>

<p>I use the <code>bind-key</code> package to more easily keep track and manage user keybindings. <code>bind-key</code> comes with <code>use-package</code> so we just load it.</p>

<p>The main advantage of using this over <code>define-key</code> or <code>global-set-key</code> is that you can use <kbd>M-x</kbd> <code>describe-personal-keybindings</code> to see a list of all the customized keybindings you have defined.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;bind-key</span><span class="p">)</span></code></pre></div>
<h3 id="miscellaneous-keybindings">Miscellaneous keybindings</h3>

<ul>
<li><p><code>M-g</code> interactively asks for a line number and jump to it (<code>goto-line)</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">bind-key</span> <span class="s">&#34;M-g&#34;</span> <span class="ss">&#39;goto-line</span><span class="p">)</span></code></pre></div></li>

<li><p><code>M-`</code> focuses the next frame, if multiple ones are active (emulate the Mac &ldquo;next app window&rdquo; keybinding)</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">bind-key</span> <span class="s">&#34;M-`&#34;</span> <span class="ss">&#39;other-frame</span><span class="p">)</span></code></pre></div></li>

<li><p>Interactive search key bindings -  <a href="https://github.com/benma/visual-regexp-steroids.el">visual-regexp-steroids</a> provides sane regular expressions and visual incremental search. We make <kbd>C-s</kbd> and <kbd>C-r</kbd> run the visual-regexp functions. We leave <kbd>C-M-s</kbd> and <kbd>C-M-r</kbd> to run the default <code>isearch-forward/backward</code> functions, as a fallback. I use the <code>pcre2el</code> package to support PCRE-style regular expressions.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">pcre2el</span><span class="p">)</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">visual-regexp-steroids</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">vr/engine</span> <span class="ss">&#39;pcre2el</span> <span class="s">&#34;Use PCRE regular expressions&#34;</span><span class="p">)</span>
  <span class="nb">:bind</span>
  <span class="p">(</span><span class="s">&#34;C-c r&#34;</span> <span class="o">.</span> <span class="nv">vr/replace</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&#34;C-c q&#34;</span> <span class="o">.</span> <span class="nv">vr/query-replace</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&#34;C-r&#34;</span>   <span class="o">.</span> <span class="nv">vr/isearch-backward</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&#34;C-s&#34;</span>   <span class="o">.</span> <span class="nv">vr/isearch-forward</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&#34;C-M-s&#34;</span> <span class="o">.</span> <span class="nv">isearch-forward</span><span class="p">)</span>
  <span class="p">(</span><span class="s">&#34;C-M-r&#34;</span> <span class="o">.</span> <span class="nv">isearch-backward</span><span class="p">))</span></code></pre></div></li>

<li><p>Key binding to use &ldquo;<a href="http://www.emacswiki.org/emacs/HippieExpand">hippie expand</a>&rdquo; for text autocompletion</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">bind-key</span> <span class="s">&#34;M-/&#34;</span> <span class="ss">&#39;hippie-expand</span><span class="p">)</span></code></pre></div></li>

<li><p>The <a href="https://github.com/justbur/emacs-which-key">which-key</a> package makes Emacs functionality much easier to discover and explore: in short, after you start the input of a command and stop, pondering what key must follow, it will automatically open a non-intrusive buffer at the bottom of the screen offering you suggestions for completing the command, that&rsquo;s it, nothing else. It&rsquo;s beautiful.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">which-key</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:diminish</span> <span class="nv">which-key-mode</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">which-key-mode</span><span class="p">))</span></code></pre></div></li>
</ul>

<h3 id="emulating-vi-s-key">Emulating vi&rsquo;s <code>%</code> key</h3>

<p>One of the few things I missed in Emacs from vi was the <code>%</code> key, which jumps to the parenthesis, bracket or brace which matches the one below the cursor. This function implements the functionality. Inspired by <a href="http://www.emacswiki.org/emacs/NavigatingParentheses">http://www.emacswiki.org/emacs/NavigatingParentheses</a>, but modified to use <code>smartparens</code> instead of the default commands, and to work on brackets and braces.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">zz/goto-match-paren</span> <span class="p">(</span><span class="nv">arg</span><span class="p">)</span>
  <span class="s">&#34;Go to the matching paren/bracket, otherwise (or if ARG is not nil) insert %.
</span><span class="s">  vi style of % jumping to matching brace.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;p&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">memq</span> <span class="nv">last-command</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">set-mark</span>
                                <span class="nv">cua-set-mark</span>
                                <span class="nv">zz/goto-match-paren</span>
                                <span class="nv">down-list</span>
                                <span class="nv">up-list</span>
                                <span class="nv">end-of-defun</span>
                                <span class="nv">beginning-of-defun</span>
                                <span class="nv">backward-sexp</span>
                                <span class="nv">forward-sexp</span>
                                <span class="nv">backward-up-list</span>
                                <span class="nv">forward-paragraph</span>
                                <span class="nv">backward-paragraph</span>
                                <span class="nv">end-of-buffer</span>
                                <span class="nv">beginning-of-buffer</span>
                                <span class="nv">backward-word</span>
                                <span class="nf">forward-word</span>
                                <span class="nv">mwheel-scroll</span>
                                <span class="nv">backward-word</span>
                                <span class="nf">forward-word</span>
                                <span class="nv">mouse-start-secondary</span>
                                <span class="nv">mouse-yank-secondary</span>
                                <span class="nv">mouse-secondary-save-then-kill</span>
                                <span class="nv">move-end-of-line</span>
                                <span class="nv">move-beginning-of-line</span>
                                <span class="nf">backward-char</span>
                                <span class="nf">forward-char</span>
                                <span class="nf">scroll-up</span>
                                <span class="nf">scroll-down</span>
                                <span class="nf">scroll-left</span>
                                <span class="nf">scroll-right</span>
                                <span class="nv">mouse-set-point</span>
                                <span class="nv">next-buffer</span>
                                <span class="nv">previous-buffer</span>
                                <span class="nv">previous-line</span>
                                <span class="nv">next-line</span>
                                <span class="p">)))</span>
      <span class="p">(</span><span class="nf">self-insert-command</span> <span class="p">(</span><span class="nb">or</span> <span class="nv">arg</span> <span class="mi">1</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nf">looking-at</span> <span class="s">&#34;\\s\(&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nv">sp-forward-sexp</span><span class="p">)</span> <span class="p">(</span><span class="nf">backward-char</span> <span class="mi">1</span><span class="p">))</span>
          <span class="p">((</span><span class="nf">looking-at</span> <span class="s">&#34;\\s\)&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nf">forward-char</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nv">sp-backward-sexp</span><span class="p">))</span>
          <span class="p">(</span><span class="no">t</span> <span class="p">(</span><span class="nf">self-insert-command</span> <span class="p">(</span><span class="nb">or</span> <span class="nv">arg</span> <span class="mi">1</span><span class="p">))))))</span></code></pre></div>
<p>We bind this function to the <code>%</code> key.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">bind-key</span> <span class="s">&#34;%&#34;</span> <span class="ss">&#39;zz/goto-match-paren</span><span class="p">)</span></code></pre></div>
<h2 id="org-mode">Org mode</h2>

<p>I have started using <a href="http://orgmode.org/">org-mode</a> to writing, blogging, coding, presentations and more, thanks to the hearty recommendations and information from <a href="http://www.cmdln.org/">Nick</a> and many others. I am duly impressed. I have been a fan of the idea of <a href="https://en.wikipedia.org/wiki/Literate_programming">literate programming</a> for many years, and I have tried other tools before (most notably <a href="https://www.cs.tufts.edu/~nr/noweb/">noweb</a>, which I used during grad school for many of my homeworks and projects), but org-mode is the first tool I have encountered which seems to make it practical. Here are some of the resources I have found useful in learning it:</p>

<ul>
<li>Howard Abrams&rsquo; <a href="http://www.howardism.org/Technical/Emacs/literate-programming-tutorial.html">Introduction to Literate Programming</a>, which got me jumpstarted into writing code documented with org-mode.</li>
<li>Nick Anderson&rsquo;s <a href="https://github.com/nickanderson/Level-up-your-notes-with-Org">Level up your notes with Org</a>, which contains many useful tips and configuration tricks.</li>
<li>Sacha Chua&rsquo;s <a href="http://sachachua.com/blog/2014/01/tips-learning-org-mode-emacs/">Some tips for learning Org Mode for Emacs</a>, her <a href="http://pages.sachachua.com/.emacs.d/Sacha.html">Emacs configuration</a> and many of her <a href="http://sachachua.com/blog/category/emacs/">other articles</a>.</li>
<li>Rainer König&rsquo;s <a href="https://www.youtube.com/playlist?list=PLVtKhBrRV_ZkPnBtt_TD1Cs9PJlU0IIdE">OrgMode Tutorial</a> video series.</li>
</ul>

<p>This is the newest and most-in-flux section of my Emacs config, since I&rsquo;m still learning org-mode myself.</p>

<p>I use <code>use-package</code> to load the <code>org</code> package, and put its configuration inside the corresponding sections for keybindings (<code>:bind</code>), custom variables (<code>:custom</code>), custom faces (<code>:custom-face</code>), hooks (<code>:hook</code>) and general configuration code (<code>:config</code>), respectively. The contents of each section is populated with the corresponding snippets that follow. You see here the complete <code>use-package</code> declaration for completeness, but see the sections below for the details on where each snippet comes from, and some other configuration code that ends up outside this declaration.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:pin</span> <span class="nv">manual</span>
  <span class="nb">:load-path</span> <span class="p">(</span><span class="s">&#34;lisp/org-mode/lisp&#34;</span> <span class="s">&#34;lisp/org-mode/lisp/contrib/lisp&#34;</span><span class="p">)</span>
  <span class="nb">:bind</span>
    <span class="p">(</span><span class="s">&#34;C-c l&#34;</span> <span class="o">.</span> <span class="nv">org-store-link</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&#34;C-c a&#34;</span> <span class="o">.</span> <span class="nv">org-agenda</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&#34;A-h&#34;</span> <span class="o">.</span> <span class="nv">org-mark-element</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&#34;C-c c&#34;</span> <span class="o">.</span> <span class="nv">org-capture</span><span class="p">)</span>
  <span class="nb">:custom</span>
    <span class="p">(</span><span class="nv">org-directory</span> <span class="s">&#34;~/Dropbox/org&#34;</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-log-done</span> <span class="no">t</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-startup-indented</span> <span class="no">t</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-default-notes-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&#34;/notes.org&#34;</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">org-confirm-babel-evaluate</span> <span class="no">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-src-fontify-natively</span> <span class="no">t</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-src-tab-acts-natively</span> <span class="no">t</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-hide-emphasis-markers</span> <span class="no">t</span><span class="p">)</span>
  <span class="nb">:custom-face</span>
    <span class="p">(</span><span class="nv">variable-pitch</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:family</span> <span class="s">&#34;Source Sans Pro&#34;</span> <span class="nb">:height</span> <span class="mi">180</span> <span class="nb">:weight</span> <span class="nv">light</span><span class="p">))))</span>
    <span class="p">(</span><span class="nv">fixed-pitch</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:family</span> <span class="s">&#34;Inconsolata&#34;</span><span class="p">))))</span>
  <span class="nb">:hook</span>
    <span class="p">(</span><span class="nv">org-babel-after-execute</span> <span class="o">.</span> <span class="nv">org-redisplay-inline-images</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;after-save-hook</span> <span class="ss">&#39;org-babel-tangle</span>
                                     <span class="ss">&#39;run-at-end</span> <span class="ss">&#39;only-in-org-mode</span><span class="p">)))</span>
    <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">visual-line-mode</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">variable-pitch-mode</span><span class="p">)</span>
  <span class="nb">:config</span>
    <span class="p">(</span><span class="nv">org-babel-do-load-languages</span>
     <span class="ss">&#39;org-babel-load-languages</span>
     <span class="o">&#39;</span><span class="p">((</span><span class="nv">cfengine3</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">ruby</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">latex</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">plantuml</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">python</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">shell</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">elvish</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">calc</span> <span class="o">.</span> <span class="no">t</span><span class="p">)))</span>
    <span class="p">(</span><span class="nv">font-lock-add-keywords</span> <span class="ss">&#39;org-mode</span>
                            <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;^ *\\([-]\\) &#34;</span>
                               <span class="p">(</span><span class="mi">0</span> <span class="p">(</span><span class="nb">prog1</span> <span class="p">()</span> <span class="p">(</span><span class="nv">compose-region</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">match-end</span> <span class="mi">1</span><span class="p">)</span> <span class="s">&#34;•&#34;</span><span class="p">))))))</span>
    <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">variable-tuple</span>
            <span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nf">x-list-fonts</span> <span class="s">&#34;Source Sans Pro&#34;</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">:font</span> <span class="s">&#34;Source Sans Pro&#34;</span><span class="p">))</span>
                  <span class="p">((</span><span class="nf">x-list-fonts</span> <span class="s">&#34;Lucida Grande&#34;</span><span class="p">)</span>   <span class="o">&#39;</span><span class="p">(</span><span class="nb">:font</span> <span class="s">&#34;Lucida Grande&#34;</span><span class="p">))</span>
                  <span class="p">((</span><span class="nf">x-list-fonts</span> <span class="s">&#34;Verdana&#34;</span><span class="p">)</span>         <span class="o">&#39;</span><span class="p">(</span><span class="nb">:font</span> <span class="s">&#34;Verdana&#34;</span><span class="p">))</span>
                  <span class="p">((</span><span class="nf">x-family-fonts</span> <span class="s">&#34;Sans Serif&#34;</span><span class="p">)</span>    <span class="o">&#39;</span><span class="p">(</span><span class="nb">:family</span> <span class="s">&#34;Sans Serif&#34;</span><span class="p">))</span>
                  <span class="p">(</span><span class="no">nil</span> <span class="p">(</span><span class="ne">warn</span> <span class="s">&#34;Cannot find a Sans Serif Font.  Install Source Sans Pro.&#34;</span><span class="p">))))</span>
           <span class="p">(</span><span class="nv">base-font-color</span>     <span class="p">(</span><span class="nv">face-foreground</span> <span class="ss">&#39;default</span> <span class="no">nil</span> <span class="ss">&#39;default</span><span class="p">))</span>
           <span class="p">(</span><span class="nv">headline</span>           <span class="o">`</span><span class="p">(</span><span class="nb">:inherit</span> <span class="nv">default</span> <span class="nb">:weight</span> <span class="nv">bold</span> <span class="nb">:foreground</span> <span class="o">,</span><span class="nv">base-font-color</span><span class="p">)))</span>

      <span class="p">(</span><span class="nv">custom-theme-set-faces</span>
       <span class="ss">&#39;user</span>
       <span class="o">`</span><span class="p">(</span><span class="nv">org-level-8</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span><span class="p">))))</span>
       <span class="o">`</span><span class="p">(</span><span class="nv">org-level-7</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span><span class="p">))))</span>
       <span class="o">`</span><span class="p">(</span><span class="nv">org-level-6</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span><span class="p">))))</span>
       <span class="o">`</span><span class="p">(</span><span class="nv">org-level-5</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span><span class="p">))))</span>
       <span class="o">`</span><span class="p">(</span><span class="nv">org-level-4</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">1.1</span><span class="p">))))</span>
       <span class="o">`</span><span class="p">(</span><span class="nv">org-level-3</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">1.25</span><span class="p">))))</span>
       <span class="o">`</span><span class="p">(</span><span class="nv">org-level-2</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">1.5</span><span class="p">))))</span>
       <span class="o">`</span><span class="p">(</span><span class="nv">org-level-1</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">1.75</span><span class="p">))))</span>
       <span class="o">`</span><span class="p">(</span><span class="nv">org-document-title</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">2.0</span> <span class="nb">:underline</span> <span class="no">nil</span><span class="p">))))))</span>
    <span class="p">(</span><span class="nv">eval-after-load</span> <span class="ss">&#39;face-remap</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">diminish</span> <span class="ss">&#39;buffer-face-mode</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">eval-after-load</span> <span class="ss">&#39;simple</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">diminish</span> <span class="ss">&#39;visual-line-mode</span><span class="p">)))</span></code></pre></div>
<h3 id="general-org-mode-configuration">General org-mode configuration</h3>

<p>Set <code>org-directory</code> to a directory inside my Dropbox so that my main files get synchronized automatically.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-directory</span> <span class="s">&#34;~/Dropbox/org&#34;</span><span class="p">)</span></code></pre></div>
<p>Automatically log done times in todo items.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-log-done</span> <span class="no">t</span><span class="p">)</span></code></pre></div>
<p>Keep the indentation well structured by setting <code>org-startup-indented</code> to <code>t</code>. This is a must have. Makes it feel less like editing a big text file and more like a purpose built editor for org-mode that forces the indentation. Thanks <a href="https://github.com/nickanderson/Level-up-your-notes-with-Org/blob/master/Level-up-your-notes-with-Org.org#automatic-visual-indention">Nick</a> for the tip!</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-startup-indented</span> <span class="no">t</span><span class="p">)</span></code></pre></div>
<p>By default, <code>org-indent</code> produces an indicator <code>&quot;Ind&quot;</code> in the modeline. We use diminish to hide it.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-indent</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:diminish</span><span class="p">)</span></code></pre></div>
<h3 id="keybindings-1">Keybindings</h3>

<p>Set up <code>C-c l</code> to store a link to the current org object, in counterpart to the default <code>C-c C-l</code> to insert a link.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="s">&#34;C-c l&#34;</span> <span class="o">.</span> <span class="nv">org-store-link</span><span class="p">)</span></code></pre></div>
<p>Set up <code>C-c a</code> to call up agenda mode.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="s">&#34;C-c a&#34;</span> <span class="o">.</span> <span class="nv">org-agenda</span><span class="p">)</span></code></pre></div>
<p>The default keybinding for <code>org-mark-element</code> is <code>M-h</code>, which in macOS hides the current application, so I bind it to <code>A-h</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="s">&#34;A-h&#34;</span> <span class="o">.</span> <span class="nv">org-mark-element</span><span class="p">)</span></code></pre></div>
<p>Default setup and keybinding for <code>org-capture</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-default-notes-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&#34;/notes.org&#34;</span><span class="p">))</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="s">&#34;C-c c&#34;</span> <span class="o">.</span> <span class="nv">org-capture</span><span class="p">)</span></code></pre></div>
<p>Load <code>org-tempo</code> to enable snippets such as <code>&lt;s&lt;TAB&gt;</code> to insert a source block.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-tempo</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:after</span> <span class="nv">org</span><span class="p">)</span></code></pre></div>
<h3 id="building-presentations-with-org-mode">Building presentations with org-mode</h3>

<p><a href="https://github.com/yjwen/org-reveal">org-reveal</a> is an awesome package for building presentations with org-mode.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-reveal</span>
  <span class="nb">:after</span> <span class="nv">ox</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">org-reveal-root</span> <span class="s">&#34;file:///Users/taazadi1/Dropbox/org/reveal.js&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">htmlize</span>
  <span class="nb">:after</span> <span class="nv">ox-reveal</span><span class="p">)</span></code></pre></div>
<h3 id="various-exporters">Various exporters</h3>

<p>One of the big strengths of org-mode is the ability to export a document in many different formats. Here I load some of the exporters I have found useful.</p>

<ul>
<li><p>Markdown</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-md</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:after</span> <span class="nv">ox</span><span class="p">)</span></code></pre></div></li>

<li><p><a href="https://github.com/stig/ox-jira.el">Jira markup</a>. I also load <code>org-jira</code>, which provides a full interface to Jira through org-mode.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-jira</span>
  <span class="nb">:after</span> <span class="nv">ox</span><span class="p">)</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-jira</span>
  <span class="nb">:after</span> <span class="nv">org</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">jiralib-url</span> <span class="s">&#34;https://jira.swisscom.com&#34;</span><span class="p">))</span></code></pre></div></li>

<li><p>Confluence markup.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-confluence</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:after</span> <span class="nv">ox</span><span class="p">)</span></code></pre></div></li>

<li><p>AsciiDoc</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-asciidoc</span>
  <span class="nb">:after</span> <span class="nv">ox</span><span class="p">)</span></code></pre></div></li>

<li><p>TexInfo. I have found that the best way to produce a PDF from an org file is to export it to a <code>.texi</code> file, and then use <code>texi2pdf</code> to produce the PDF.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-texinfo</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:after</span> <span class="nv">ox</span><span class="p">)</span></code></pre></div></li>
</ul>

<h3 id="blogging-with-hugo">Blogging with Hugo</h3>

<p><a href="https://ox-hugo.scripter.co/">ox-hugo</a> is an awesome way to blog from org-mode. It makes it possible for posts in org-mode format to be kept separate, and it generates the Markdown files for Hugo. Hugo <a href="https://gohugo.io/content-management/formats/">supports org files</a>, but using ox-hugo has multiple advantages:</p>

<ul>
<li>Parsing is done by org-mode natively, not by an external library. Although goorgeous (used by Hugo) is very good, it still lacks in many areas, which leads to text being interpreted differently as by org-mode.</li>
<li>Hugo is left to parse a native Markdown file, which means that many of its features such as shortcodes, TOC generation, etc., can still be used on the generated file.</li>
<li>I am intrigued by ox-hugo&rsquo;s &ldquo;one post per org subtree&rdquo; proposed structure. So far I&rsquo;ve always had one file per post, but with org-mode&rsquo;s structuring features, it might make sense to give it a try.</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-hugo</span>
  <span class="nb">:after</span> <span class="nv">ox</span><span class="p">)</span></code></pre></div>
<p>Configure a capture template for creating new ox-hugo blog posts, from <a href="https://ox-hugo.scripter.co/doc/org-capture-setup">ox-hugo&rsquo;s Org Capture Setup</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-capture</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">org-hugo-new-subtree-post-capture-template</span> <span class="p">()</span>
    <span class="s">&#34;Returns </span><span class="ss">`org-capture&#39;</span><span class="s"> template string for new Hugo post.
</span><span class="s">  See </span><span class="ss">`org-capture-templates&#39;</span><span class="s"> for more information.&#34;</span>
    <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">title</span> <span class="p">(</span><span class="nf">read-from-minibuffer</span> <span class="s">&#34;Post Title: &#34;</span><span class="p">))</span> <span class="c1">;Prompt to enter the post title</span>
           <span class="p">(</span><span class="nv">fname</span> <span class="p">(</span><span class="nv">org-hugo-slug</span> <span class="nv">title</span><span class="p">)))</span>
      <span class="p">(</span><span class="nf">mapconcat</span> <span class="nf">#&#39;identity</span>
                 <span class="o">`</span><span class="p">(</span><span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;* TODO &#34;</span> <span class="nv">title</span><span class="p">)</span>
                   <span class="s">&#34;:PROPERTIES:&#34;</span>
                   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:EXPORT_HUGO_BUNDLE: &#34;</span> <span class="nv">fname</span><span class="p">)</span>
                   <span class="s">&#34;:EXPORT_FILE_NAME: index&#34;</span>
                   <span class="s">&#34;:END:&#34;</span>
                   <span class="s">&#34;%?\n&#34;</span><span class="p">)</span>                <span class="c1">;Place the cursor here finally</span>
                 <span class="s">&#34;\n&#34;</span><span class="p">)))</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-capture-templates</span>
               <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;z&#34;</span>                <span class="c1">;`org-capture&#39; binding + z</span>
                 <span class="s">&#34;zzamboni.org post&#34;</span>
                 <span class="nv">entry</span>
                 <span class="c1">;; It is assumed that below file is present in `org-directory&#39;</span>
                 <span class="c1">;; and that it has an &#34;Ideas&#34; heading. It can even be a</span>
                 <span class="c1">;; symlink pointing to the actual location of all-posts.org!</span>
                 <span class="p">(</span><span class="nv">file+olp</span> <span class="s">&#34;zzamboni.org&#34;</span> <span class="s">&#34;Ideas&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="nb">function</span> <span class="nv">org-hugo-new-subtree-post-capture-template</span><span class="p">))))</span></code></pre></div>
<p>The following code needs to be added at the end of org-files you use with ox-hugo, to set up a hook to <a href="https://ox-hugo.scripter.co/doc/auto-export-on-saving/">automatically export the current post on saving</a>. The code is shown here but only for reference. For an example of how this is used see the bottom of the <a href="https://raw.githubusercontent.com/zzamboni/zzamboni.org/master/content-org/zzamboni.org">zzamboni.org file</a> which contains the source for <a href="http://zzamboni.org/">my website</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="err">#</span> <span class="nv">Local</span> <span class="nv">Variables:</span>
<span class="err">#</span> <span class="nv">eval:</span> <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;after-save-hook</span> <span class="nf">#&#39;</span><span class="nv">org-hugo-export-wim-to-md-after-save</span> <span class="nb">:append</span> <span class="nb">:local</span><span class="p">)</span>
<span class="err">#</span> <span class="nv">End:</span></code></pre></div>
<p>Omit auto-saving <a href="https://ox-hugo.scripter.co/doc/auto-export-on-saving/#step-1b-prevent-auto-export-during-org-capture">for <code>org-capture</code>&rsquo;d notes</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-capture</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">modi/org-capture--remove-auto-org-to-hugo-export-maybe</span> <span class="p">()</span>
    <span class="s">&#34;Function for </span><span class="ss">`org-capture-before-finalize-hook&#39;</span><span class="s">.
</span><span class="s">  Disable </span><span class="ss">`org-hugo-export-wim-to-md-after-save&#39;</span><span class="s">.&#34;</span>
    <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-hugo-allow-export-after-save</span> <span class="no">nil</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">modi/org-capture--add-auto-org-to-hugo-export-maybe</span> <span class="p">()</span>
    <span class="s">&#34;Function for </span><span class="ss">`org-capture-after-finalize-hook&#39;</span><span class="s">.
</span><span class="s">  Enable </span><span class="ss">`org-hugo-export-wim-to-md-after-save&#39;</span><span class="s">.&#34;</span>
    <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-hugo-allow-export-after-save</span> <span class="no">t</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-capture-before-finalize-hook</span> <span class="nf">#&#39;</span><span class="nv">modi/org-capture--remove-auto-org-to-hugo-export-maybe</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-capture-after-finalize-hook</span> <span class="nf">#&#39;</span><span class="nv">modi/org-capture--add-auto-org-to-hugo-export-maybe</span><span class="p">))</span></code></pre></div>
<h3 id="keeping-a-journal">Keeping a Journal</h3>

<p>I use <a href="http://750words.com/">750words</a> for my personal Journal, and I usually write my entries locally using Scrivener. I have been playing with <code>org-journal</code> for this, but I am not fully convinced yet.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-journal</span>
  <span class="nb">:after</span> <span class="nv">org</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">org-journal-dir</span> <span class="s">&#34;~/Documents/logbook&#34;</span><span class="p">))</span></code></pre></div>
<h3 id="literate-programming-using-org-babel">Literate programming using org-babel</h3>

<p>Org-mode is the first literate programming tool that seems practical and useful, since it&rsquo;s easy to edit, execute and document code from within the same tool (Emacs) using all of its existing capabilities (i.e. each code block can be edited in its native Emacs mode, taking full advantage of indentation, completion, etc.)</p>

<p>Plain literate programming is built-in, but the <code>ob-*</code> packages provide the ability to execute code in different languages, beyond those included with org-mode.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ob-cfengine3</span>
  <span class="nb">:after</span> <span class="nv">org</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ob-plantuml</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:after</span> <span class="nv">org</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">org-plantuml-jar-path</span>
   <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;/usr/local/Cellar/plantuml/1.2017.18/libexec/plantuml.jar&#34;</span><span class="p">)))</span></code></pre></div>
<p>We configure the languages for which to load org-babel support.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-babel-do-load-languages</span>
 <span class="ss">&#39;org-babel-load-languages</span>
 <span class="o">&#39;</span><span class="p">((</span><span class="nv">cfengine3</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">ruby</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">latex</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">plantuml</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">python</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">shell</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">elvish</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">calc</span> <span class="o">.</span> <span class="no">t</span><span class="p">)))</span></code></pre></div>
<p>This is potentially dangerous: it suppresses the query before executing code from within org-mode. I use it because I am very careful and only press <code>C-c C-c</code> on blocks I absolutely understand.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-confirm-babel-evaluate</span> <span class="no">nil</span><span class="p">)</span></code></pre></div>
<p>This makes it so that code within <code>src</code> blocks is fontified according to their corresponding Emacs mode, making the file much more readable.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-src-fontify-natively</span> <span class="no">t</span><span class="p">)</span></code></pre></div>
<p>In principle this makes it so that indentation in <code>src</code> blocks works as in their native mode, but in my experience it does not always work reliably. For full proper indentation, always edit the code in a native buffer by pressing <code>C-c '</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-src-tab-acts-natively</span> <span class="no">t</span><span class="p">)</span></code></pre></div>
<p>Automatically show inline images, useful when executing code that produces them, such as PlantUML or Graphviz.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-babel-after-execute</span> <span class="o">.</span> <span class="nv">org-redisplay-inline-images</span><span class="p">)</span></code></pre></div>
<p>This little snippet has revolutionized my literate programming workflow. It automatically runs <code>org-babel-tangle</code> upon saving any org-mode buffer, which means the resulting files will be automatically kept up to date.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;after-save-hook</span> <span class="ss">&#39;org-babel-tangle</span>
                                 <span class="ss">&#39;run-at-end</span> <span class="ss">&#39;only-in-org-mode</span><span class="p">)))</span></code></pre></div>
<h3 id="beautifying-org-mode">Beautifying org-mode</h3>

<p>These settings make org-mode much more readable by using different fonts for headings, hiding some of the markup, etc. This was taken originally from Howard Abrams&rsquo; <a href="http://www.howardism.org/Technical/Emacs/orgmode-wordprocessor.html">Org as a Word Processor</a>, and subsequently tweaked and broken up in the different parts of the <code>use-package</code> declaration by me.</p>

<p>First, we set <code>org-hid-emphasis-markers</code> so that the markup indicators are not shown.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-hide-emphasis-markers</span> <span class="no">t</span><span class="p">)</span></code></pre></div>
<p>We add an entry to the org-mode font-lock table so that list markers are shown with a middle dot instead of the original character.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">font-lock-add-keywords</span> <span class="ss">&#39;org-mode</span>
                        <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;^ *\\([-]\\) &#34;</span>
                           <span class="p">(</span><span class="mi">0</span> <span class="p">(</span><span class="nb">prog1</span> <span class="p">()</span> <span class="p">(</span><span class="nv">compose-region</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">match-end</span> <span class="mi">1</span><span class="p">)</span> <span class="s">&#34;•&#34;</span><span class="p">))))))</span></code></pre></div>
<p>We use the <code>org-bullets</code> package to display the titles with nice unicode bullets instead of the text ones.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-bullets</span>
  <span class="nb">:after</span> <span class="nv">org</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">org-bullets-mode</span> <span class="mi">1</span><span class="p">))))</span></code></pre></div>
<p>We choose a nice font for the document title and the section headings. The first one found in the system from the list below is used, and the same font is used for the different levels, in varying sizes.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">variable-tuple</span>
        <span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nf">x-list-fonts</span> <span class="s">&#34;Source Sans Pro&#34;</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">:font</span> <span class="s">&#34;Source Sans Pro&#34;</span><span class="p">))</span>
              <span class="p">((</span><span class="nf">x-list-fonts</span> <span class="s">&#34;Lucida Grande&#34;</span><span class="p">)</span>   <span class="o">&#39;</span><span class="p">(</span><span class="nb">:font</span> <span class="s">&#34;Lucida Grande&#34;</span><span class="p">))</span>
              <span class="p">((</span><span class="nf">x-list-fonts</span> <span class="s">&#34;Verdana&#34;</span><span class="p">)</span>         <span class="o">&#39;</span><span class="p">(</span><span class="nb">:font</span> <span class="s">&#34;Verdana&#34;</span><span class="p">))</span>
              <span class="p">((</span><span class="nf">x-family-fonts</span> <span class="s">&#34;Sans Serif&#34;</span><span class="p">)</span>    <span class="o">&#39;</span><span class="p">(</span><span class="nb">:family</span> <span class="s">&#34;Sans Serif&#34;</span><span class="p">))</span>
              <span class="p">(</span><span class="no">nil</span> <span class="p">(</span><span class="ne">warn</span> <span class="s">&#34;Cannot find a Sans Serif Font.  Install Source Sans Pro.&#34;</span><span class="p">))))</span>
       <span class="p">(</span><span class="nv">base-font-color</span>     <span class="p">(</span><span class="nv">face-foreground</span> <span class="ss">&#39;default</span> <span class="no">nil</span> <span class="ss">&#39;default</span><span class="p">))</span>
       <span class="p">(</span><span class="nv">headline</span>           <span class="o">`</span><span class="p">(</span><span class="nb">:inherit</span> <span class="nv">default</span> <span class="nb">:weight</span> <span class="nv">bold</span> <span class="nb">:foreground</span> <span class="o">,</span><span class="nv">base-font-color</span><span class="p">)))</span>

  <span class="p">(</span><span class="nv">custom-theme-set-faces</span>
   <span class="ss">&#39;user</span>
   <span class="o">`</span><span class="p">(</span><span class="nv">org-level-8</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span><span class="p">))))</span>
   <span class="o">`</span><span class="p">(</span><span class="nv">org-level-7</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span><span class="p">))))</span>
   <span class="o">`</span><span class="p">(</span><span class="nv">org-level-6</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span><span class="p">))))</span>
   <span class="o">`</span><span class="p">(</span><span class="nv">org-level-5</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span><span class="p">))))</span>
   <span class="o">`</span><span class="p">(</span><span class="nv">org-level-4</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">1.1</span><span class="p">))))</span>
   <span class="o">`</span><span class="p">(</span><span class="nv">org-level-3</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">1.25</span><span class="p">))))</span>
   <span class="o">`</span><span class="p">(</span><span class="nv">org-level-2</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">1.5</span><span class="p">))))</span>
   <span class="o">`</span><span class="p">(</span><span class="nv">org-level-1</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">1.75</span><span class="p">))))</span>
   <span class="o">`</span><span class="p">(</span><span class="nv">org-document-title</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="o">,@</span><span class="nv">headline</span> <span class="o">,@</span><span class="nv">variable-tuple</span> <span class="nb">:height</span> <span class="mf">2.0</span> <span class="nb">:underline</span> <span class="no">nil</span><span class="p">))))))</span></code></pre></div>
<p>I use proportional fonts in org-mode for the text, while keeping fixed-width fonts for blocks, so that source code, tables, etc. are shown correctly. These settings include:</p>

<ul>
<li><p>Setting up the <code>variable-pitch</code> face (I only learned of its existence now while figuring this out) to the proportional font I like to use. I&rsquo;m currently using <a href="https://en.wikipedia.org/wiki/Source_Sans_Pro">Source Sans Pro</a>. Another favorite is <a href="https://en.wikipedia.org/wiki/Avenir_(typeface)">Avenir Next</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">variable-pitch</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:family</span> <span class="s">&#34;Source Sans Pro&#34;</span> <span class="nb">:height</span> <span class="mi">180</span> <span class="nb">:weight</span> <span class="nv">light</span><span class="p">))))</span></code></pre></div></li>

<li><p>Setting up the <code>fixed-pitch</code> face to be the same as my usual <code>default</code> face. My current one is <a href="https://en.wikipedia.org/wiki/Inconsolata">Inconsolata</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">fixed-pitch</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:family</span> <span class="s">&#34;Inconsolata&#34;</span><span class="p">))))</span></code></pre></div></li>

<li><p>Configuring the corresponding <code>org-mode</code> faces for blocks, verbatim code, and maybe a couple of other things. As these change more frequently, I do them directly from the <code>customize-face</code> interface, you can see their current settings in the <a href="#customized-variables">Customized variables</a> section.</p></li>

<li><p>Setting up <code>visual-line-mode</code> and making all my paragraphs one single line, so that the lines wrap around nicely in the window according to their proportional-font size, instead of at a fixed character count, which does not work so nicely when characters have varying widths. I set up a hook that automatically enables <code>visual-line-mode</code> and <code>variable-pitch-mode</code> when entering org-mode.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">visual-line-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">variable-pitch-mode</span><span class="p">)</span></code></pre></div>
<p>These two modes produce modeline indicators, which I disable using <code>diminish</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">eval-after-load</span> <span class="ss">&#39;face-remap</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">diminish</span> <span class="ss">&#39;buffer-face-mode</span><span class="p">))</span>
<span class="p">(</span><span class="nv">eval-after-load</span> <span class="ss">&#39;simple</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">diminish</span> <span class="ss">&#39;visual-line-mode</span><span class="p">))</span></code></pre></div></li>
</ul>

<h3 id="auto-generated-table-of-contents">Auto-generated table of contents</h3>

<p>The <code>toc-org</code> package allows us to insert a table of contents in headings marked with <code>:TOC:</code>. This is useful for org files that are to be viewed directly on GitHub, which renders org files correctly, but does not generate a table of contents at the top. For an example, see <a href="https://github.com/zzamboni/dot-emacs/blob/master/init.org">this file on GitHub</a>.</p>

<p>Note that this breaks HTML export by default, as the links generated by <code>toc-org</code> cannot be parsed properly by the html exporter. The <a href="https://github.com/snosov1/toc-org/issues/35#issuecomment-275096511">workaround</a> is to use <code>:TOC:noexport:</code> as the marker, which removed the generated TOC from the export, but still allows <code>ox-html</code> to insert its own TOC at the top.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">toc-org</span>
  <span class="nb">:after</span> <span class="nv">org</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">toc-org-enable</span><span class="p">))</span></code></pre></div>
<h3 id="grabbing-links-from-different-mac-applications">Grabbing links from different Mac applications</h3>

<p><code>org-mac-link</code> (included in contrib) implements the ability to grab links from different Mac apps and insert them in the file. Bind <code>C-c g</code> to call <code>org-mac-grab-link</code> to choose an application and insert a link.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-mac-link</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:after</span> <span class="nv">org</span>
  <span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">org-mode-map</span>
              <span class="p">(</span><span class="s">&#34;C-c g&#34;</span> <span class="o">.</span> <span class="nv">org-mac-grab-link</span><span class="p">)))</span></code></pre></div>
<h3 id="reformatting-an-org-buffer">Reformatting an org buffer</h3>

<p>I picked up this little gem in the org mailing list. A function that reformats the current buffer by regenerating the text from its internal parsed representation. Quite amazing.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">zz/org-reformat-buffer</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">y-or-n-p</span> <span class="s">&#34;Really format current buffer? &#34;</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">document</span> <span class="p">(</span><span class="nv">org-element-interpret-data</span> <span class="p">(</span><span class="nv">org-element-parse-buffer</span><span class="p">))))</span>
      <span class="p">(</span><span class="nf">erase-buffer</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">insert</span> <span class="nv">document</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)))))</span></code></pre></div>
<h3 id="snippets-and-templates">Snippets and templates</h3>

<p>The <a href="https://github.com/Kungsgeten/yankpad">yankpad</a> package makes it easy to store snippets that can be inserted at arbitrary points. Together with <a href="http://joaotavora.github.io/yasnippet/">yasnippet</a> it becomes more powerful.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">yasnippet</span><span class="p">)</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">yankpad</span>
  <span class="nb">:init</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">yankpad-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&#34;/yankpad.org&#34;</span><span class="p">))</span>
  <span class="nb">:bind</span>
  <span class="p">([</span><span class="nv">f7</span><span class="p">]</span> <span class="o">.</span> <span class="nv">yankpad-map</span><span class="p">)</span>
  <span class="p">([</span><span class="nv">f12</span><span class="p">]</span> <span class="o">.</span> <span class="nv">yankpad-expand</span><span class="p">)</span>
  <span class="nb">:config</span>
  <span class="c1">;; If you want to expand snippets with hippie-expand</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;hippie-expand-try-functions-list</span> <span class="nf">#&#39;</span><span class="nv">yankpad-expand</span><span class="p">))</span></code></pre></div>
<h2 id="system-specific-configuration">System-specific configuration</h2>

<p>Some settings maybe OS-specific, and this is where we set them. For now I only use Emacs on my Mac, so only the Mac section is filled out, but there are sections for Linux and Windows as well.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nf">eq</span> <span class="nv">system-type</span> <span class="ss">&#39;darwin</span><span class="p">)</span>
       <span class="nv">&lt;&lt;Mac</span> <span class="nv">settings&gt;&gt;</span>
       <span class="p">)</span>
      <span class="p">((</span><span class="nf">eq</span> <span class="nv">system-type</span> <span class="ss">&#39;windows-nt</span><span class="p">)</span>
       <span class="nv">&lt;&lt;Windows</span> <span class="nv">settings&gt;&gt;</span>
       <span class="p">)</span>
      <span class="p">((</span><span class="nf">eq</span> <span class="nv">system-type</span> <span class="ss">&#39;gnu/linux</span><span class="p">)</span>
       <span class="nv">&lt;&lt;Linux</span> <span class="nv">settings&gt;&gt;</span>
       <span class="p">))</span></code></pre></div>
<h3 id="linux">Linux</h3>

<p>There are no Linux-specific settings for now.</p>

<h3 id="windows">Windows</h3>

<p>There are no Windows-specific settings for now.</p>

<h2 id="appearance-buffer-file-management-and-theming">Appearance, buffer/file management and theming</h2>

<p>Here we take care of all the visual, UX and desktop-management settings.</p>

<p>The <code>diminish</code> package makes it possible to remove clutter from the modeline. Here we just load it, it gets enabled for individual packages in their corresponding declarations.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">diminish</span><span class="p">)</span></code></pre></div>
<p>I have been playing with different themes, and I have settled for now in <code>gruvbox</code>. Some of my other favorites are also here so I don&rsquo;t forget about them.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;;(use-package solarized-theme)</span>
<span class="c1">;;(use-package darktooth-theme)</span>
<span class="c1">;;(use-package kaolin-themes)</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">gruvbox-theme</span><span class="p">)</span>
<span class="p">(</span><span class="nv">load-theme</span> <span class="ss">&#39;gruvbox</span><span class="p">)</span></code></pre></div>
<p>Install <a href="https://github.com/Malabarba/smart-mode-line">smart-mode-line</a> for modeline goodness, including configurable abbreviation of directories, and other things.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">smart-mode-line</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">sml/setup</span><span class="p">))</span></code></pre></div>
<p>Enable desktop-save mode, which saves the current buffer configuration on exit and reloads it on restart.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">desktop</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">desktop-save-mode</span><span class="p">))</span></code></pre></div>
<p>The <code>uniquify</code> package makes it much easier to identify different open files with the same name by prepending/appending their directory or some other information to them. I configure it to add the directory name after the filename. <code>uniquify</code> is included with Emacs, so I specify <code>:ensure nil</code> so that <code>use-package</code> doesn&rsquo;t try to install it, and just loads and configures it.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">uniquify</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">uniquify-after-kill-buffer-p</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">uniquify-buffer-name-style</span> <span class="ss">&#39;post-forward</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">uniquify-strip-common-suffix</span> <span class="no">t</span><span class="p">))</span></code></pre></div>
<p>I like to highlight the current line and column. I&rsquo;m still deciding between two approaches:</p>

<ul>
<li>Using the built-in <code>global-hl-mode</code> to always highlight the current line, together with the <code>col-highlight</code> package, which highlights the column only after a defined interval has passed</li>
<li>Using the <code>crosshairs</code> package, which combines both but always highlights both the column and the line. It also has a &ldquo;highlight crosshairs when idle&rdquo; mode, but I prefer to have the current line always highlighted, I&rsquo;m only undecided about the always-on column highlighting.</li>
</ul>

<p>Sometimes I find the always-highlighted column to be distracting, but other times I find it useful. So I have both pieces of code here, I&rsquo;m still deciding. Both are disabled for now.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">global-hl-line-mode</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">col-highlight</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">col-highlight-toggle-when-idle</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">col-highlight-set-interval</span> <span class="mi">2</span><span class="p">))</span>
<span class="c1">;; (use-package crosshairs</span>
<span class="c1">;;   :config</span>
<span class="c1">;;   (crosshairs-mode))</span></code></pre></div>
<p>Once in a blue moon I need to kill all buffers. It&rsquo;s one of those things where I genuinely have to wonder why there is no built in functionality for it. This can be invoked using <code>C-M-s-k</code>. This keybinding makes sure you don&rsquo;t hit it unless you really want to.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">close-all-buffers</span> <span class="p">()</span>
  <span class="s">&#34;Kill all buffers without regard for their origin.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">mapc</span> <span class="ss">&#39;kill-buffer</span> <span class="p">(</span><span class="nf">buffer-list</span><span class="p">)))</span>
<span class="p">(</span><span class="nv">bind-key</span> <span class="s">&#34;C-M-s-k&#34;</span> <span class="ss">&#39;close-all-buffers</span><span class="p">)</span></code></pre></div>
<p>I also use <code>recentf</code> to keep a list of recently open buffers. These are visible in helm&rsquo;s open-file mode.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">recentf</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">recentf-max-menu-items</span> <span class="mi">50</span><span class="p">)</span>
  <span class="nb">:init</span>
  <span class="p">(</span><span class="nv">recentf-mode</span><span class="p">))</span></code></pre></div>
<p>The <a href="http://martinowen.net/blog/2010/02/03/tips-for-emacs-ibuffer.html">ibuffer</a> package allows all sort of useful operations on the list of open buffers. I haven&rsquo;t customized it yet, but I have a keybinding to open it. (Disabled for now as I am using helm&rsquo;s <code>helm-buffer-list</code>).</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ibuffer</span>
  <span class="nb">:bind</span>
  <span class="p">(</span><span class="s">&#34;C-x C-b&#34;</span> <span class="o">.</span> <span class="nv">ibuffer</span><span class="p">))</span></code></pre></div>
<p>The <a href="https://github.com/nonsequitur/smex">smex</a> package is incredibly useful, adding IDO integration and some other very nice features to <code>M-x</code>, which make it easier to discover and use Emacs commands. Highly recommended. (Disabled for now as I&rsquo;m using helm&rsquo;s <code>helm-M-x</code>).</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">smex</span>
  <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;M-x&#34;</span> <span class="o">.</span> <span class="nv">smex</span><span class="p">))</span>
  <span class="nb">:config</span> <span class="p">(</span><span class="nv">smex-initialize</span><span class="p">))</span></code></pre></div>
<p><a href="https://www.emacswiki.org/emacs/MidnightMode">midnight-mode</a> purges buffers which haven&rsquo;t been displayed in 3 days. We configure the period so that the cleanup happens every 2 hours (7200 seconds).</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">midnight</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">midnight-period</span> <span class="mi">7200</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">midnight-mode</span> <span class="mi">1</span><span class="p">))</span></code></pre></div>
<p>For distraction-free writing, I&rsquo;m testing out <code>writeroom-mode</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">writeroom-mode</span><span class="p">)</span></code></pre></div>
<p><a href="https://github.com/jaypei/emacs-neotree">NeoTree</a> shows a navigation tree on a sidebar, and allows a number of operations on the files and directories. I&rsquo;m not much of a fan of this type of interface in Emacs, but I have set it up to check it out.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">neotree</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;neo-theme</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">display-graphic-p</span><span class="p">)</span> <span class="ss">&#39;icons</span> <span class="ss">&#39;arrow</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;neo-smart-open</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">customize-set-variable</span> <span class="ss">&#39;projectile-switch-project-action</span> <span class="ss">&#39;neotree-projectile-action</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">neotree-project-dir</span> <span class="p">()</span>
    <span class="s">&#34;Open NeoTree using the git root.&#34;</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">project-dir</span> <span class="p">(</span><span class="nv">projectile-project-root</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">file-name</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">)))</span>
      <span class="p">(</span><span class="nv">neotree-toggle</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">if</span> <span class="nv">project-dir</span>
          <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">neo-global--window-exists-p</span><span class="p">)</span>
              <span class="p">(</span><span class="nb">progn</span>
                <span class="p">(</span><span class="nv">neotree-dir</span> <span class="nv">project-dir</span><span class="p">)</span>
                <span class="p">(</span><span class="nv">neotree-find</span> <span class="nv">file-name</span><span class="p">)))</span>
        <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;Could not find git project root.&#34;</span><span class="p">))))</span>
  <span class="nb">:bind</span>
  <span class="p">([</span><span class="nv">f8</span><span class="p">]</span> <span class="o">.</span> <span class="nv">neotree-project-dir</span><span class="p">))</span></code></pre></div>
<p><code>wc-mode</code> allows counting characters and words, both on demand and continuously. It also allows setting up a word/character goal.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">wc-mode</span><span class="p">)</span></code></pre></div>
<p>The <code>all-the-icons</code> package provides a number of useful icons.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">all-the-icons</span><span class="p">)</span></code></pre></div>
<h3 id="completion-ido-or-helm">Completion: IDO or Helm?</h3>

<p>The <a href="https://tuhdo.github.io/helm-intro.html">battle</a> <a href="https://news.ycombinator.com/item?id=11100312">rages</a> <a href="https://www.reddit.com/r/emacs/comments/3o36sc/what_do_you_prefer_ido_or_helm/">on</a> - <a href="https://github.com/emacs-helm/helm">helm</a> or <a href="https://www.emacswiki.org/emacs/InteractivelyDoThings">IDO</a>? Both are nice completion frameworks for Emacs, and both integrate nicely with most main Emacs functions, including file opening, command and buffer selection, etc. I was using IDO for some time but are now giving helm a try. Both my configs are shown below, but only Helm is enabled at the moment.</p>

<p>Should I also look at <a href="https://sam217pa.github.io/2016/09/13/from-helm-to-ivy/">ivy</a>?</p>

<h4 id="ido">IDO</h4>

<p>I use <a href="https://www.masteringemacs.org/article/introduction-to-ido-mode">IDO mode</a> to get better matching capabilities everywhere in Emacs (disabled while I give helm a try, see below).</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ido</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">ido-mode</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">ido-everywhere</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ido-use-virtual-buffers</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ido-enable-flex-matching</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ido-use-filename-at-point</span> <span class="no">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ido-auto-merge-work-directories-length</span> <span class="mi">-1</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">ido-completing-read+</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">ido-ubiquitous-mode</span> <span class="mi">1</span><span class="p">))</span></code></pre></div>
<h4 id="helm">Helm</h4>

<p>This config came originally from <a href="https://github.com/daedreth/UncleDavesEmacs#user-content-ido-and-why-i-started-using-helm">Uncle Dave&rsquo;s Emacs config</a>, thought I have tweaked it a bit.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">helm</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:diminish</span> <span class="nv">helm-mode</span>
  <span class="nb">:bind</span>
  <span class="p">((</span><span class="s">&#34;C-x C-f&#34;</span> <span class="o">.</span> <span class="nv">helm-find-files</span><span class="p">)</span>
   <span class="p">(</span><span class="s">&#34;C-x C-b&#34;</span> <span class="o">.</span> <span class="nv">helm-buffers-list</span><span class="p">)</span>
   <span class="p">(</span><span class="s">&#34;C-x b&#34;</span>   <span class="o">.</span> <span class="nv">helm-multi-files</span><span class="p">)</span>
   <span class="p">(</span><span class="s">&#34;M-x&#34;</span>     <span class="o">.</span> <span class="nv">helm-M-x</span><span class="p">)</span>
   <span class="nb">:map</span> <span class="nv">helm-find-files-map</span>
   <span class="p">(</span><span class="s">&#34;C-b&#34;</span>     <span class="o">.</span> <span class="nv">helm-find-files-up-one-level</span><span class="p">)</span>
   <span class="p">(</span><span class="s">&#34;C-f&#34;</span>     <span class="o">.</span> <span class="nv">helm-execute-persistent-action</span><span class="p">)</span>
   <span class="p">([</span><span class="nv">tab</span><span class="p">]</span>     <span class="o">.</span> <span class="nv">helm-ff-RET</span><span class="p">))</span>
  <span class="nb">:config</span>
  <span class="c1">;;   (defun daedreth/helm-hide-minibuffer ()</span>
  <span class="c1">;;     (when (with-helm-buffer helm-echo-input-in-header-line)</span>
  <span class="c1">;;       (let ((ov (make-overlay (point-min) (point-max) nil nil t)))</span>
  <span class="c1">;;         (overlay-put ov &#39;window (selected-window))</span>
  <span class="c1">;;         (overlay-put ov &#39;face</span>
  <span class="c1">;;                      (let ((bg-color (face-background &#39;default nil)))</span>
  <span class="c1">;;                        `(:background ,bg-color :foreground ,bg-color)))</span>
  <span class="c1">;;         (setq-local cursor-type nil))))</span>
  <span class="c1">;;   (add-hook &#39;helm-minibuffer-set-up-hook &#39;daedreth/helm-hide-minibuffer)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">helm-autoresize-max-height</span> <span class="mi">0</span>
        <span class="nv">helm-autoresize-min-height</span> <span class="mi">40</span>
        <span class="nv">helm-M-x-fuzzy-match</span> <span class="no">t</span>
        <span class="nv">helm-buffers-fuzzy-matching</span> <span class="no">t</span>
        <span class="nv">helm-recentf-fuzzy-match</span> <span class="no">t</span>
        <span class="nv">helm-semantic-fuzzy-match</span> <span class="no">t</span>
        <span class="nv">helm-imenu-fuzzy-match</span> <span class="no">t</span>
        <span class="nv">helm-split-window-in-side-p</span> <span class="no">nil</span>
        <span class="nv">helm-move-to-line-cycle-in-source</span> <span class="no">nil</span>
        <span class="nv">helm-ff-search-library-in-sexp</span> <span class="no">t</span>
        <span class="nv">helm-scroll-amount</span> <span class="mi">8</span>
        <span class="nv">helm-echo-input-in-header-line</span> <span class="no">nil</span><span class="p">)</span>
  <span class="nb">:init</span>
  <span class="p">(</span><span class="nv">helm-mode</span> <span class="mi">1</span><span class="p">))</span>

  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;helm-config</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">helm-autoresize-mode</span> <span class="mi">1</span><span class="p">)</span>

  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">helm-flx</span>
    <span class="nb">:custom</span>
    <span class="p">(</span><span class="nv">helm-flx-for-helm-find-files</span> <span class="no">t</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">helm-flx-for-helm-locate</span> <span class="no">t</span><span class="p">)</span>
    <span class="nb">:config</span>
    <span class="p">(</span><span class="nv">helm-flx-mode</span> <span class="mi">+1</span><span class="p">))</span></code></pre></div>
<h2 id="coding">Coding</h2>

<p>Coding is one of my main use for Emacs, although writing has slowly taken over it. This used to be the largest section of my Emacs config until org-mode overtook it :)</p>

<h3 id="general-settings-and-modules">General settings and modules</h3>

<p>When enabled, <code>subword</code> allows navigating &ldquo;sub words&rdquo; individually in CamelCaseIdentifiers. For now I only enable it in <code>clojure-mode</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">subword</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">clojure-mode</span> <span class="o">.</span> <span class="nv">subword-mode</span><span class="p">))</span></code></pre></div>
<p>With <code>aggressive-indent</code>, indentation is always kept up to date in the whole buffer. Sometimes it gets in the way, but in general it&rsquo;s nice and saves a lot of work, so I enable it for all programming modes.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">aggressive-indent</span>
  <span class="nb">:diminish</span> <span class="nv">aggressive-indent-mode</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">prog-mode</span> <span class="o">.</span> <span class="nv">aggressive-indent-mode</span><span class="p">))</span></code></pre></div>
<p>With <code>company-mode</code>, we get automatic completion - when there are completions available, a popup menu will appear when you stop typing for a moment, and you can either continue typing or accept the completion using the Enter key. I enable it globally.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">company</span>
  <span class="nb">:diminish</span> <span class="nv">company-mode</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">global-company-mode</span><span class="p">))</span></code></pre></div>
<p><code>projectile-mode</code> allows us to perform project-relative operations such as searches, navigation, etc.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">projectile</span>
  <span class="nb">:diminish</span> <span class="nv">projectile-mode</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">projectile-global-mode</span><span class="p">))</span></code></pre></div>
<p>I find <code>iedit</code> absolutely indispensable when coding. In short: when you hit <code>Ctrl-:</code>, all occurrences of the symbol under the cursor (or the current selection) are highlighted, and any changes you make on one of them will be automatically applied to all others. It&rsquo;s great for renaming variables in code.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">iedit</span>
  <span class="nb">:config</span> <span class="p">(</span><span class="nv">set-face-background</span> <span class="ss">&#39;iedit-occurrence</span> <span class="s">&#34;Magenta&#34;</span><span class="p">))</span></code></pre></div>
<p>Turn on the online documentation mode for all programming modes (not all of them support it) and for the Clojure REPL <code>cider</code> mode.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">eldoc</span>
  <span class="nb">:diminish</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">prog-mode</span>       <span class="o">.</span> <span class="nv">turn-on-eldoc-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">cider-repl-mode</span> <span class="o">.</span> <span class="nv">turn-on-eldoc-mode</span><span class="p">))</span></code></pre></div>
<p>On-the-fly spell checking. I enable it for all text modes.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">flyspell</span>
  <span class="nb">:hook</span> <span class="p">(</span><span class="nv">text-mode</span> <span class="o">.</span> <span class="nv">flyspell-mode</span><span class="p">)</span>
  <span class="nb">:diminish</span>
  <span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">flyspell-mouse-map</span>
              <span class="p">([</span><span class="nv">down-mouse-3</span><span class="p">]</span> <span class="o">.</span> <span class="nf">#&#39;</span><span class="nv">flyspell-correct-word</span><span class="p">)</span>
              <span class="p">([</span><span class="nv">mouse-3</span><span class="p">]</span>      <span class="o">.</span> <span class="nf">#&#39;</span><span class="nv">undefined</span><span class="p">)))</span></code></pre></div>
<h3 id="clojure-and-lisp-coding">Clojure and LISP coding</h3>

<p>I dabble in Clojure and Emacs LISP, and Emacs has some fantastic support for them. There&rsquo;s a number of packages and configuration related to this, so I have a whole section for it.</p>

<p>The centerpiece is of course <code>clojure-mode</code>. In addition to files ending in <code>.clj</code>, I bind it automatically to <code>.boot</code> files (both by extension and by <a href="https://github.com/boot-clj/boot/wiki/For-Emacs-Users">shebang line</a>) and to the <a href="http://riemann.io/">Riemann</a> config files.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">clojure-mode</span>
  <span class="nb">:mode</span> <span class="s">&#34;\\.clj.*$&#34;</span>
  <span class="nb">:mode</span> <span class="s">&#34;riemann.config&#34;</span>
  <span class="nb">:mode</span> <span class="s">&#34;\\.boot&#34;</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;magic-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;.* boot&#34;</span> <span class="o">.</span> <span class="nv">clojure-mode</span><span class="p">)))</span></code></pre></div>
<p>Enable some additional fontification for Clojure code.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">clojure-mode-extra-font-locking</span><span class="p">)</span></code></pre></div>
<p>The <code>cider</code> package provides a fantastic REPL built into Emacs. We configure a few aspects, including pretty printing, fontification, history size and others.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">cider</span>
  <span class="nb">:custom</span>
  <span class="c1">;; nice pretty printing</span>
  <span class="p">(</span><span class="nv">cider-repl-use-pretty-printing</span> <span class="no">nil</span><span class="p">)</span>
  <span class="c1">;; nicer font lock in REPL</span>
  <span class="p">(</span><span class="nv">cider-repl-use-clojure-font-lock</span> <span class="no">t</span><span class="p">)</span>
  <span class="c1">;; result prefix for the REPL</span>
  <span class="p">(</span><span class="nv">cider-repl-result-prefix</span> <span class="s">&#34;; =&gt; &#34;</span><span class="p">)</span>
  <span class="c1">;; never ending REPL history</span>
  <span class="p">(</span><span class="nv">cider-repl-wrap-history</span> <span class="no">t</span><span class="p">)</span>
  <span class="c1">;; looong history</span>
  <span class="p">(</span><span class="nv">cider-repl-history-size</span> <span class="mi">5000</span><span class="p">)</span>
  <span class="c1">;; persistent history</span>
  <span class="p">(</span><span class="nv">cider-repl-history-file</span> <span class="s">&#34;~/.emacs.d/cider-history&#34;</span><span class="p">)</span>
  <span class="c1">;; error buffer not popping up</span>
  <span class="p">(</span><span class="nv">cider-show-error-buffer</span> <span class="no">nil</span><span class="p">)</span>
  <span class="c1">;; go right to the REPL buffer when it&#39;s finished connecting</span>
  <span class="p">(</span><span class="nv">cider-repl-pop-to-buffer-on-connect</span> <span class="no">t</span><span class="p">))</span></code></pre></div>
<p>We use <code>clj-refactor</code> for supporting advanced code refactoring in Clojure.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">clj-refactor</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">my-clojure-mode-hook</span> <span class="p">()</span>
    <span class="p">(</span><span class="nv">clj-refactor-mode</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">yas-minor-mode</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">; for adding require/use/import statements</span>
    <span class="c1">;; This choice of keybinding leaves cider-macroexpand-1 unbound</span>
    <span class="p">(</span><span class="nv">cljr-add-keybindings-with-prefix</span> <span class="s">&#34;C-c C-m&#34;</span><span class="p">))</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">clojure-mode</span> <span class="o">.</span> <span class="nv">my-clojure-mode-hook</span><span class="p">))</span></code></pre></div>
<p>When coding in LISP-like languages, <code>rainbow-delimiters</code> is a must-have - it marks each concentric pair of parenthesis with different colors, which makes it much easier to understand expressions and spot mistakes.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">rainbow-delimiters</span>
  <span class="nb">:hook</span>
  <span class="p">((</span><span class="nv">prog-mode</span> <span class="nv">cider-repl-mode</span><span class="p">)</span> <span class="o">.</span> <span class="nv">rainbow-delimiters-mode</span><span class="p">))</span></code></pre></div>
<p>Another useful addition for LISP coding - <code>smartparens</code> enforces parenthesis to match, and adds a number of useful operations for manipulating parenthesized expressions. I map <code>M-(</code> to enclose the next expression as in <code>paredit</code> using a custom function. Prefix argument can be used to indicate how many expressions to enclose instead of just 1. E.g. <code>C-u 3 M-(</code> will enclose the next 3 sexps.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">zz/sp-enclose-next-sexp</span> <span class="p">(</span><span class="nv">num</span><span class="p">)</span> <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;p&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nv">insert-parentheses</span> <span class="p">(</span><span class="nb">or</span> <span class="nv">num</span> <span class="mi">1</span><span class="p">)))</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">smartparens</span>
  <span class="nb">:diminish</span> <span class="nv">smartparens-mode</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;smartparens-config</span><span class="p">)</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">sp-base-key-bindings</span> <span class="ss">&#39;paredit</span><span class="p">)</span>
  <span class="nb">:hook</span>
  <span class="p">((</span><span class="nv">clojure-mode</span>
    <span class="nv">emacs-lisp-mode</span>
    <span class="nv">lisp-mode</span>
    <span class="nv">cider-repl-mode</span><span class="p">)</span> <span class="o">.</span> <span class="nv">smartparens-strict-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">smartparens-mode</span>  <span class="o">.</span> <span class="nv">sp-use-paredit-bindings</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">smartparens-mode</span>  <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">local-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;M-(&#34;</span><span class="p">)</span> <span class="ss">&#39;zz/sp-enclose-next-sexp</span><span class="p">))))</span></code></pre></div>
<p>Minor mode for highlighting the current sexp in LISP modes.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">hl-sexp</span>
  <span class="nb">:hook</span>
  <span class="p">((</span><span class="nv">clojure-mode</span> <span class="nv">lisp-mode</span> <span class="nv">emacs-lisp-mode</span><span class="p">)</span> <span class="o">.</span> <span class="nv">hl-sexp-mode</span><span class="p">))</span></code></pre></div>
<p>Trying out <a href="https://github.com/abo-abo/lispy">lispy</a> for LISP code editing (disabled for now).</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">lispy</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">enable-lispy-mode</span> <span class="p">()</span> <span class="p">(</span><span class="nv">lispy-mode</span> <span class="mi">1</span><span class="p">))</span>
  <span class="nb">:hook</span>
  <span class="p">((</span><span class="nv">clojure-mode</span>
    <span class="nv">emacs-lisp-mode</span>
    <span class="nv">common-lisp-mode</span>
    <span class="nv">scheme-mode</span>
    <span class="nv">lisp-mode</span><span class="p">)</span> <span class="o">.</span> <span class="nv">enable-lispy-mode</span><span class="p">))</span></code></pre></div>
<p>I am sometimes trying out <a href="https://shaunlebron.github.io/parinfer/">parinfer</a> (disabled for now).</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">parinfer</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:bind</span>
  <span class="p">((</span><span class="s">&#34;C-,&#34;</span> <span class="o">.</span> <span class="nv">parinfer-toggle-mode</span><span class="p">))</span>
  <span class="nb">:init</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">parinfer-extensions</span>
        <span class="o">&#39;</span><span class="p">(</span><span class="nv">defaults</span>       <span class="c1">; should be included.</span>
          <span class="nv">pretty-parens</span>  <span class="c1">; different paren styles for different modes.</span>
          <span class="c1">;;evil           ; If you use Evil.</span>
          <span class="nv">lispy</span>          <span class="c1">; If you use Lispy. With this extension, you should install Lispy and do not enable lispy-mode directly.</span>
          <span class="nv">paredit</span>        <span class="c1">; Introduce some paredit commands.</span>
          <span class="nv">smart-tab</span>      <span class="c1">; C-b &amp; C-f jump positions and smart shift with tab &amp; S-tab.</span>
          <span class="nv">smart-yank</span><span class="p">))</span>   <span class="c1">; Yank behavior depend on mode.</span>
  <span class="nb">:hook</span>
  <span class="p">((</span><span class="nv">clojure-mode</span>
    <span class="nv">emacs-lisp-mode</span>
    <span class="nv">common-lisp-mode</span>
    <span class="nv">scheme-mode</span>
    <span class="nv">lisp-mode</span><span class="p">)</span> <span class="o">.</span> <span class="nv">parinfer-mode</span><span class="p">))</span></code></pre></div>
<h3 id="other-programming-languages">Other programming languages</h3>

<p>Many other programming languages are well served by a single mode, without so much setup as Clojure/LISP.</p>

<ul>
<li><p><a href="http://cfengine.com/">CFEngine</a> policy files.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">cfengine</span>
  <span class="nb">:commands</span> <span class="nv">cfengine3-mode</span>
  <span class="nb">:mode</span> <span class="p">(</span><span class="s">&#34;\\.cf\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">cfengine3-mode</span><span class="p">))</span></code></pre></div></li>

<li><p><a href="https://www.perl.org/">Perl</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">cperl-mode</span>
  <span class="nb">:mode</span> <span class="s">&#34;\\.p[lm]\\&#39;&#34;</span>
  <span class="nb">:interpreter</span> <span class="s">&#34;perl&#34;</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">cperl-hairy</span> <span class="no">t</span><span class="p">))</span></code></pre></div></li>

<li><p><a href="http://fishshell.com/">Fish shell</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">fish-mode</span>
  <span class="nb">:mode</span> <span class="s">&#34;\\.fish\\&#39;&#34;</span>
  <span class="nb">:interpreter</span> <span class="s">&#34;fish&#34;</span><span class="p">)</span></code></pre></div></li>

<li><p><a href="https://www.lua.org/">Lua</a>, which I use for <a href="http://zzamboni.org/tags/hammerspoon/">Hammerspoon</a> configuration.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">lua-mode</span><span class="p">)</span></code></pre></div></li>

<li><p>YAML, generally useful</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">yaml-mode</span><span class="p">)</span></code></pre></div></li>

<li><p>AppleScript</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">applescript-mode</span><span class="p">)</span></code></pre></div></li>

<li><p>Go</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">go-mode</span><span class="p">)</span></code></pre></div></li>

<li><p>Check MELPA package definitions</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">package-lint</span><span class="p">)</span></code></pre></div></li>

<li><p><a href="http://elvish.io/">Elvish shell</a></p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">elvish-mode</span><span class="p">)</span></code></pre></div></li>

<li><p><a href="https://racket-lang.org/">Racket</a></p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">racket-mode</span><span class="p">)</span></code></pre></div></li>

<li><p><a href="https://nixos.org/nix/">Nix</a> package files</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">nix-mode</span><span class="p">)</span></code></pre></div></li>
</ul>

<h2 id="other-tools">Other tools</h2>

<ul>
<li><p>git interface with some simple configuration I picked up somewhere. When you press <kbd>C-c C-g</kbd>, <code>magit-status</code> runs full-screen, but when you press <kbd>q</kbd>, it restores your previous window setup. Very handy.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">magit</span>
  <span class="nb">:diminish</span> <span class="nv">auto-revert-mode</span>
  <span class="nb">:bind</span>
  <span class="p">((</span><span class="s">&#34;C-c C-g&#34;</span> <span class="o">.</span> <span class="nv">magit-status</span><span class="p">)</span>
   <span class="nb">:map</span> <span class="nv">magit-status-mode-map</span>
   <span class="p">(</span><span class="s">&#34;q&#34;</span>       <span class="o">.</span> <span class="nv">magit-quit-session</span><span class="p">))</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">defadvice</span> <span class="nv">magit-status</span> <span class="p">(</span><span class="nv">around</span> <span class="nv">magit-fullscreen</span> <span class="nv">activate</span><span class="p">)</span>
    <span class="s">&#34;Make magit-status run alone in a frame.&#34;</span>
    <span class="p">(</span><span class="nv">window-configuration-to-register</span> <span class="nb">:magit-fullscreen</span><span class="p">)</span>
    <span class="nv">ad-do-it</span>
    <span class="p">(</span><span class="nv">delete-other-windows</span><span class="p">))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">magit-quit-session</span> <span class="p">()</span>
    <span class="s">&#34;Restore the previous window configuration and kill the magit buffer.&#34;</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">kill-buffer</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">jump-to-register</span> <span class="nb">:magit-fullscreen</span><span class="p">)))</span></code></pre></div></li>

<li><p>Interface to use the <a href="https://geoff.greer.fm/ag/">silver-searcher</a></p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ag</span><span class="p">)</span></code></pre></div></li>

<li><p>Publishing with <a href="https://gohugo.io/">Hugo</a>. I don&rsquo;t use this anymore since I started <a href="#blogging-with-hugo">blogging with ox-hugo</a>. I keep it loaded, but without its keybinding, because it makes it easy sometimes to see the history of my Markdown posts.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">easy-hugo</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">easy-hugo-basedir</span> <span class="s">&#34;~/Personal/devel/zzamboni.org/zzamboni.org/&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">easy-hugo-url</span> <span class="s">&#34;http://zzamboni.org/&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">easy-hugo-previewtime</span> <span class="s">&#34;300&#34;</span><span class="p">)</span>
  <span class="c1">;;(define-key global-map (kbd &#34;C-c C-e&#34;) &#39;easy-hugo)</span>
  <span class="p">)</span></code></pre></div></li>

<li><p>Function to randomize the order of lines in a region, from <a href="https://www.emacswiki.org/emacs/RandomizeBuffer">https://www.emacswiki.org/emacs/RandomizeBuffer</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">my-randomize-region</span> <span class="p">(</span><span class="nv">beg</span> <span class="nv">end</span><span class="p">)</span>
  <span class="s">&#34;Randomize lines in region from BEG to END.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;*r&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">lines</span> <span class="p">(</span><span class="nv">split-string</span>
                <span class="p">(</span><span class="nf">delete-and-extract-region</span> <span class="nv">beg</span> <span class="nv">end</span><span class="p">)</span> <span class="s">&#34;\n&#34;</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">string-equal</span> <span class="s">&#34;&#34;</span> <span class="p">(</span><span class="nf">car</span> <span class="p">(</span><span class="nv">last</span> <span class="nv">lines</span> <span class="mi">1</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">setq</span> <span class="nv">lines</span> <span class="p">(</span><span class="nv">butlast</span> <span class="nv">lines</span> <span class="mi">1</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">apply</span> <span class="ss">&#39;insert</span>
           <span class="p">(</span><span class="nf">mapcar</span> <span class="ss">&#39;cdr</span>
                   <span class="p">(</span><span class="nf">sort</span> <span class="p">(</span><span class="nf">mapcar</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">cons</span> <span class="p">(</span><span class="nf">random</span><span class="p">)</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">x</span> <span class="s">&#34;\n&#34;</span><span class="p">)))</span> <span class="nv">lines</span><span class="p">)</span>
                         <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">&lt;</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">b</span><span class="p">))))))))</span></code></pre></div></li>

<li><p><a href="https://www.gnu.org/software/emacs/manual/html_node/autotype/Autoinserting.html">auto-insert mode</a> for automatically inserting user-defined templates for certain file types. It&rsquo;s included with Emacs, so I just configure its directory to one inside my Dropbox, and set the hook to run it automatically when opening a file.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">autoinsert</span>
  <span class="nb">:ensure</span> <span class="no">nil</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">auto-insert-directory</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">&#34;auto-insert/&#34;</span><span class="p">))</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">find-file</span> <span class="o">.</span> <span class="nv">auto-insert</span><span class="p">))</span></code></pre></div></li>

<li><p>Create and manage <a href="https://gist.github.com/">GitHub gists</a>. Setting <code>gist-view-gist</code> to <code>t</code> makes it open new gists in the web browser automatically after creating them.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">gist</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">gist-view-gist</span> <span class="no">t</span> <span class="s">&#34;Automatically open new gists in browser&#34;</span><span class="p">))</span></code></pre></div></li>
</ul>

<h2 id="general-text-editing">General text editing</h2>

<p>In addition to coding, I configure some modes that can be used for text editing.</p>

<ul>
<li><p><a href="http://asciidoctor.org/docs/user-manual/">AsciiDoc</a>, which I use for <a href="http://cf-learn.info/">my book</a> and some other text. I also set up <code>visual-line-mode</code> and <code>variable-pitch-mode</code> here. <code>adoc-mode</code> is not so granular as <code>org-mode</code> with respect to face assignments, so the variable/fixed distinction does not always work, but it&rsquo;s still pretty good for long-text editing.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">adoc-mode</span>
  <span class="nb">:mode</span> <span class="s">&#34;\\.asciidoc\\&#39;&#34;</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">adoc-mode</span> <span class="o">.</span> <span class="nv">visual-line-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">adoc-mode</span> <span class="o">.</span> <span class="nv">variable-pitch-mode</span><span class="p">))</span></code></pre></div></li>

<li><p><a href="https://daringfireball.net/projects/markdown/syntax">Markdown</a>, generally useful. I also set up variable pitch and visual line mode.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">markdown-mode</span>
  <span class="nb">:hook</span>
  <span class="p">(</span><span class="nv">markdown-mode</span> <span class="o">.</span> <span class="nv">visual-line-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">markdown-mode</span> <span class="o">.</span> <span class="nv">variable-pitch-mode</span><span class="p">))</span></code></pre></div></li>

<li><p>When <a href="https://www.emacswiki.org/emacs/TypographicalPunctuationMarks">typopunct</a> is enabled (needs to be enabled by hand), automatically inserts “pretty” quotes of the appropriate type.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">typopunct</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">typopunct-change-language</span> <span class="ss">&#39;english</span> <span class="no">t</span><span class="p">))</span></code></pre></div></li>
</ul>

<h2 id="cheatsheet-and-experiments">Cheatsheet and experiments</h2>

<p>Playground and how to do different things, not necessarily used in my Emacs config but useful sometimes.</p>

<p>This is how we get a global header property in org-mode</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">alist-get</span> <span class="nb">:tangle</span>
           <span class="p">(</span><span class="nv">org-babel-parse-header-arguments</span>
            <span class="p">(</span><span class="nv">org-entry-get-with-inheritance</span> <span class="s">&#34;header-args&#34;</span><span class="p">)))</span></code></pre></div>
<p>Testing formatting org snippets to look like noweb-rendered output.</p>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-babel-exp-code-template</span>
      <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;\n@@latex:\\noindent@@\\llangle​//​\\rrangle\\equiv\n&#34;</span>
              <span class="nv">org-babel-exp-code-template</span><span class="p">))</span></code></pre></div>
      </section>
      

  <ul class="list dib ml0 pl0" id="tags">
    <li class="b black dib mb2 mr3">Tags: </li>
    
      <li class="black dib mb2 mr2"><a href="/tags/config" class="link mid-gray dim">config</a> </li>
    
      <li class="black dib mb2 mr2"><a href="/tags/howto" class="link mid-gray dim">howto</a> </li>
    
      <li class="black dib mb2 mr2"><a href="/tags/literateprogramming" class="link mid-gray dim">literateprogramming</a> </li>
    
      <li class="black dib mb2 mr2"><a href="/tags/literateconfig" class="link mid-gray dim">literateconfig</a> </li>
    
      <li class="black dib mb2 mr2"><a href="/tags/emacs" class="link mid-gray dim">emacs</a> </li>
    
  </ul>
  
  
  
  
  
    <div class="mt5 f6 gray nested-lh-copy bg-light-gray ph3 pv2 measure-wide-l">
      <ul class="list dib ml0 pl0">
        <li class="black dib mb2 mr2">
          Related:
        </li>
        
          
            <li class="mb2 mr3">
              <a href="/post/beautifying-org-mode-in-emacs/" class="link mid-gray dim">
                 Beautifying Org Mode in Emacs
              </a>
            </li>
          
        
          
            <li class="mb2 mr3">
              <a href="/post/my-hammerspoon-configuration-with-commentary/" class="link mid-gray dim">
                 My Hammerspoon Configuration, With Commentary
              </a>
            </li>
          
        
          
        
          
            <li class="mb2 mr3">
              <a href="/post/bang-bang---shell-shortcuts-in-elvish/" class="link mid-gray dim">
                 Bang-Bang (!!, !$) Shell Shortcuts in Elvish
              </a>
            </li>
          
        
          
            <li class="mb2 mr3">
              <a href="/post/my-elvish-configuration-with-commentary/" class="link mid-gray dim">
                 My Elvish Configuration With Commentary
              </a>
            </li>
          
        
      </ul>
    </div>
  


      <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "zzamboni-org" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>
    <div class="ph3 mt2 mt6-ns">
      <div class="bg-light-gray pa3">
      <p class="list b mb3">What's in this Post</p>
      <nav id="TableOfContents">
<ul>
<li class="list f5 w-100 hover-bg-white nl1">
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#references">References</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#customized-variables">Customized variables</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#setting-up-the-package-system">Setting up the package system</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#settings">Settings</a>
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#proxy-settings">Proxy settings</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#miscellaneous-settings">Miscellaneous settings</a></li>
</ul></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#keybindings">Keybindings</a>
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#miscellaneous-keybindings">Miscellaneous keybindings</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#emulating-vi-s-key">Emulating vi&rsquo;s <code>%</code> key</a></li>
</ul></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#org-mode">Org mode</a>
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#general-org-mode-configuration">General org-mode configuration</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#keybindings-1">Keybindings</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#building-presentations-with-org-mode">Building presentations with org-mode</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#various-exporters">Various exporters</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#blogging-with-hugo">Blogging with Hugo</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#keeping-a-journal">Keeping a Journal</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#literate-programming-using-org-babel">Literate programming using org-babel</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#beautifying-org-mode">Beautifying org-mode</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#auto-generated-table-of-contents">Auto-generated table of contents</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#grabbing-links-from-different-mac-applications">Grabbing links from different Mac applications</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#reformatting-an-org-buffer">Reformatting an org buffer</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#snippets-and-templates">Snippets and templates</a></li>
</ul></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#system-specific-configuration">System-specific configuration</a>
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#linux">Linux</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#windows">Windows</a></li>
</ul></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#appearance-buffer-file-management-and-theming">Appearance, buffer/file management and theming</a>
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#completion-ido-or-helm">Completion: IDO or Helm?</a>
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#ido">IDO</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#helm">Helm</a></li>
</ul></li>
</ul></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#coding">Coding</a>
<ul>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#general-settings-and-modules">General settings and modules</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#clojure-and-lisp-coding">Clojure and LISP coding</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#other-programming-languages">Other programming languages</a></li>
</ul></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#other-tools">Other tools</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#general-text-editing">General text editing</a></li>
<li class="list f5 w-100 hover-bg-white nl1"><a class="link ph2 pv2 db black"href="#cheatsheet-and-experiments">Cheatsheet and experiments</a></li>
</ul></li>
</ul>
</nav>
</div>
<br/></div>
  </div>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://zzamboni.org/" >
    &copy; 2018 Diego Zamboni
  </a>
  



  <a href="https://twitter.com/zzamboni" class="link-transition twitter link dib z-999 pt3 pt0-l mr2" title="Twitter link">
    <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

  </a>




  </div>
</footer>

    <script src="http://zzamboni.org/dist/app.bundle.js" async></script>

  </body>
</html>
